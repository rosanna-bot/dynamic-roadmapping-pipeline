<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Roadmapping — Miro Design System</title>
<style>
  :root {
    /* MDS Color Tokens - Light theme (Miro product) */
    --background-primary: #ffffff;
    --background-secondary: #f5f5f5;
    --background-tertiary: #ebebeb;
    --background-primary-hover: #f5f5f5;
    --background-brand-subtle: #e6e0fc;
    --background-brand-prominent: #4262ff;
    --background-danger-subtle: #fce4e4;
    --background-danger-prominent: #f24726;
    --background-warning-subtle: #fff4cc;
    --background-warning-prominent: #ffbf00;
    --background-success-subtle: #d9f2e3;
    --background-success-prominent: #23b45e;
    --background-info-subtle: #d6eeff;

    --text-primary: #050038;
    --text-secondary: #696580;
    --text-tertiary: #9b97ad;
    --text-brand: #4262ff;
    --text-danger: #f24726;
    --text-warning: #d19e00;
    --text-success: #1a8f4a;
    --text-on-brand: #ffffff;
    --text-on-danger: #ffffff;

    --border-primary: #e0dfe5;
    --border-secondary: #c9c7d1;
    --border-brand: #4262ff;
    --border-danger: #f24726;
    --border-warning: #ffbf00;
    --border-success: #23b45e;

    --icon-primary: #050038;
    --icon-secondary: #696580;
    --icon-brand: #4262ff;

    /* MDS Radii */
    --radius-100: 4px;
    --radius-200: 8px;
    --radius-300: 12px;
    --radius-400: 16px;
    --radius-full: 9999px;

    /* MDS Spacing */
    --space-50: 2px;
    --space-100: 4px;
    --space-150: 6px;
    --space-200: 8px;
    --space-250: 10px;
    --space-300: 12px;
    --space-400: 16px;
    --space-500: 20px;
    --space-600: 24px;
    --space-800: 32px;
    --space-1000: 40px;

    /* MDS Elevation */
    --elevation-100: 0 1px 3px rgba(5,0,56,0.08);
    --elevation-200: 0 2px 8px rgba(5,0,56,0.1);
    --elevation-300: 0 4px 16px rgba(5,0,56,0.12);
    --elevation-400: 0 8px 32px rgba(5,0,56,0.14);

    /* MDS Typography - Inter */
    --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: var(--font); background: var(--background-secondary); color: var(--text-primary); -webkit-font-smoothing: antialiased; }

  /* Nav — uses MDS Tabs pattern */
  .nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    background: var(--background-primary);
    border-bottom: 1px solid var(--border-primary);
    display: flex; align-items: center; padding: 0 var(--space-800); height: 52px; gap: var(--space-200);
  }
  .nav-logo {
    font-weight: 700; font-size: 14px; color: var(--text-brand); margin-right: var(--space-600);
    display: flex; align-items: center; gap: var(--space-200);
  }
  /* MDS Tabs variant="buttons" */
  .tab-list { display: flex; gap: var(--space-100); background: var(--background-secondary); padding: 2px; border-radius: var(--radius-200); }
  .tab {
    padding: 6px 14px; border-radius: var(--radius-100); font-size: 13px; font-weight: 500;
    color: var(--text-secondary); cursor: pointer; border: none; background: transparent;
    transition: all 0.15s;
  }
  .tab:hover { color: var(--text-primary); background: var(--background-primary-hover); }
  .tab.active { color: var(--text-primary); background: var(--background-primary); box-shadow: var(--elevation-100); }

  /* Screens */
  .screen { display: none; padding: 72px var(--space-800) var(--space-1000); min-height: 100vh; }
  .screen.active { display: block; }
  .screen-header { max-width: 720px; margin: 0 auto var(--space-800); }
  .screen-title { font-size: 24px; font-weight: 700; letter-spacing: -0.3px; margin-bottom: var(--space-100); color: var(--text-primary); }
  .screen-desc { font-size: 14px; color: var(--text-secondary); line-height: 1.55; }

  /* MDS Tag component */
  .tag {
    display: inline-flex; align-items: center; gap: var(--space-100);
    padding: 2px 8px; border-radius: var(--radius-100);
    font-size: 11px; font-weight: 600; line-height: 18px; white-space: nowrap;
  }
  .tag-danger-subtle { background: var(--background-danger-subtle); color: var(--text-danger); }
  .tag-danger-prominent { background: var(--background-danger-prominent); color: var(--text-on-danger); }
  .tag-warning-subtle { background: var(--background-warning-subtle); color: var(--text-warning); }
  .tag-success-subtle { background: var(--background-success-subtle); color: var(--text-success); }
  .tag-primary-subtle { background: var(--background-brand-subtle); color: var(--text-brand); }
  .tag-neutral { background: var(--background-tertiary); color: var(--text-secondary); }
  .tag-icon { width: 12px; height: 12px; }

  /* MDS Button component */
  .btn {
    display: inline-flex; align-items: center; justify-content: center; gap: var(--space-200);
    font-family: var(--font); font-size: 13px; font-weight: 600; line-height: 1;
    border-radius: var(--radius-200); cursor: pointer; transition: all 0.12s;
    white-space: nowrap;
  }
  .btn-md { padding: 8px 16px; }
  .btn-sm { padding: 6px 12px; font-size: 12px; }
  .btn-primary { background: var(--background-brand-prominent); color: var(--text-on-brand); border: none; }
  .btn-primary:hover { background: #3554db; }
  .btn-secondary { background: var(--background-primary); color: var(--text-primary); border: 1px solid var(--border-secondary); }
  .btn-secondary:hover { background: var(--background-secondary); }
  .btn-tertiary { background: transparent; color: var(--text-secondary); border: 1px solid transparent; }
  .btn-tertiary:hover { background: var(--background-secondary); color: var(--text-primary); }
  .btn-ghost { background: transparent; color: var(--text-secondary); border: none; }
  .btn-ghost:hover { color: var(--text-primary); background: var(--background-secondary); }
  .btn-danger-secondary { background: var(--background-primary); color: var(--text-danger); border: 1px solid var(--border-danger); }

  /* MDS Callout */
  .callout {
    display: flex; gap: var(--space-300); padding: var(--space-400) var(--space-500);
    border-radius: var(--radius-200); font-size: 13px; line-height: 1.5;
  }
  .callout-info { background: var(--background-info-subtle); }
  .callout-warning { background: var(--background-warning-subtle); }
  .callout-danger { background: var(--background-danger-subtle); }
  .callout-success { background: var(--background-success-subtle); }
  .callout-icon { flex-shrink: 0; margin-top: 1px; }

  /* === BRIEFING SCREEN === */
  .briefing-wrap { max-width: 720px; margin: 0 auto; }

  /* Briefing summary tiles */
  .briefing-tiles {
    display: flex; gap: var(--space-200); margin-bottom: var(--space-400);
  }
  .btile {
    flex: 1; padding: var(--space-300) var(--space-400);
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); cursor: pointer;
    transition: all 0.15s; position: relative; overflow: hidden;
    display: flex; flex-direction: column; gap: var(--space-50);
  }
  .btile:hover { box-shadow: var(--elevation-200); transform: translateY(-1px); }
  .btile-num { font-size: 22px; font-weight: 700; line-height: 1.1; }
  .btile-label { font-size: 11px; font-weight: 500; color: var(--text-secondary); }
  .btile-arrow {
    position: absolute; top: var(--space-300); right: var(--space-300);
    font-size: 13px; font-weight: 700; opacity: 0.5;
  }

  .btile-success { border-left: 3px solid var(--background-success-prominent); }
  .btile-success .btile-num { color: var(--text-success); }
  .btile-success .btile-arrow { color: var(--text-success); }
  .btile-success:hover { background: var(--background-success-subtle); }

  .btile-new { border-left: 3px solid var(--background-brand-prominent); }
  .btile-new .btile-num { color: var(--text-brand); }
  .btile-new .btile-arrow { color: var(--text-brand); }
  .btile-new:hover { background: var(--background-brand-subtle); }

  .btile-danger { border-left: 3px solid var(--background-danger-prominent); }
  .btile-danger .btile-num { color: var(--text-danger); }
  .btile-danger .btile-arrow { color: var(--text-danger); }
  .btile-danger:hover { background: var(--background-danger-subtle); }

  .btile-neutral { border-left: 3px solid var(--background-tertiary); }
  .btile-neutral .btile-num { color: var(--text-tertiary); }
  .btile-neutral .btile-arrow { color: var(--text-tertiary); }
  .btile-neutral:hover { background: var(--background-secondary); }

  .btile-confidence { border-left: 3px solid var(--background-brand-prominent); }
  .btile-confidence .btile-num { color: var(--text-brand); }
  .btile-confidence:hover { background: var(--background-brand-subtle); }
  .btile-bar {
    height: 4px; background: var(--background-tertiary); border-radius: var(--radius-full);
    margin-top: var(--space-100); overflow: hidden;
  }
  .btile-bar-fill { height: 100%; background: var(--background-brand-prominent); border-radius: var(--radius-full); }

  .briefing-bar {
    display: flex; align-items: center; justify-content: space-between;
    padding: var(--space-300) var(--space-500); background: var(--background-primary);
    border: 1px solid var(--border-primary); border-radius: var(--radius-300) var(--radius-300) 0 0;
  }
  .briefing-bar h2 { font-size: 15px; font-weight: 700; }
  .briefing-bar .meta { font-size: 12px; color: var(--text-tertiary); }

  .evidence-card {
    background: var(--background-primary);
    border-left: 1px solid var(--border-primary);
    border-right: 1px solid var(--border-primary);
    border-bottom: 1px solid var(--border-primary);
    padding: var(--space-500) var(--space-500) var(--space-500);
    transition: background 0.12s;
  }
  .evidence-card:hover { background: var(--background-primary-hover); }
  .evidence-card:last-of-type { border-radius: 0 0 var(--radius-300) var(--radius-300); }
  .evidence-card.border-danger { border-left: 3px solid var(--border-danger); }
  .evidence-card.border-warning { border-left: 3px solid var(--border-warning); }
  .evidence-card.border-brand { border-left: 3px solid var(--border-brand); }

  .ec-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-200); }
  .ec-headline { font-size: 15px; font-weight: 600; line-height: 1.4; color: var(--text-primary); margin-bottom: var(--space-300); }

  .signal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-200) var(--space-400); margin-bottom: var(--space-300); }
  .signal-item { display: flex; align-items: flex-start; gap: var(--space-200); font-size: 12px; line-height: 1.45; }
  .signal-dot { width: 6px; height: 6px; border-radius: var(--radius-full); flex-shrink: 0; margin-top: 5px; }
  .signal-dot.voc { background: var(--background-brand-prominent); }
  .signal-dot.usage { background: var(--background-success-prominent); }
  .signal-dot.strategy { background: var(--background-danger-prominent); }
  .signal-dot.market { background: var(--background-warning-prominent); }
  .signal-dot.empty { background: var(--background-tertiary); }
  .signal-type { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-tertiary); }
  .signal-text { color: var(--text-secondary); }
  .signal-text strong { color: var(--text-primary); font-weight: 600; }

  .ec-interpretation {
    padding: var(--space-300) var(--space-400); margin-bottom: var(--space-300);
    background: var(--background-secondary); border-radius: var(--radius-200);
    border-left: 2px solid var(--border-brand);
    font-size: 13px; color: var(--text-secondary); line-height: 1.5;
  }
  .ec-interpretation .arrow { color: var(--text-brand); font-weight: 600; }

  .ec-actions { display: flex; gap: var(--space-200); }


  /* === BACKLOG SCREEN === */
  .backlog-wrap { max-width: 1200px; margin: 0 auto; }
  .toolbar {
    display: flex; gap: var(--space-200); align-items: center;
    margin-bottom: var(--space-500);
  }
  .toolbar-spacer { flex: 1; }

  .kanban { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-400); }
  .kanban-col {
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-300); padding: var(--space-400); min-height: 460px;
  }
  .col-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-400); }
  .col-title { font-size: 13px; font-weight: 700; }
  .col-count { font-size: 11px; color: var(--text-tertiary); background: var(--background-secondary); padding: 1px 8px; border-radius: var(--radius-full); }
  .col-sub { font-size: 11px; color: var(--text-tertiary); margin-top: 2px; }

  .kcard {
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); padding: var(--space-300); margin-bottom: var(--space-200);
    cursor: grab; transition: all 0.12s;
  }
  .kcard:hover { box-shadow: var(--elevation-200); border-color: var(--border-secondary); }
  .kcard.ai-border { border-style: dashed; border-color: rgba(66,98,255,0.4); }
  .kcard-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-200); }
  .kcard-title { font-size: 13px; font-weight: 600; line-height: 1.35; flex: 1; }
  .kcard-dots { display: flex; gap: 4px; margin-bottom: var(--space-200); }
  .kcard-dot { width: 6px; height: 6px; border-radius: var(--radius-full); }
  .kcard-dot.on { opacity: 1; }
  .kcard-dot.off { opacity: 0.15; }
  .kcard-meta { font-size: 11px; color: var(--text-tertiary); display: flex; justify-content: space-between; }
  .kcard-score { font-weight: 600; color: var(--text-secondary); }
  .ai-label { font-size: 10px; color: var(--text-brand); font-weight: 600; display: flex; align-items: center; gap: 3px; margin-bottom: var(--space-100); }

  /* === PLAN SCREEN === */
  .plan-wrap { max-width: 1100px; margin: 0 auto; }
  .tl-container { background: var(--background-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-300); overflow: hidden; }
  .tl-head { display: flex; border-bottom: 1px solid var(--border-primary); }
  .tl-label-col { width: 260px; flex-shrink: 0; padding: var(--space-300) var(--space-400); font-size: 12px; font-weight: 600; color: var(--text-secondary); }
  .tl-quarters { display: grid; grid-template-columns: repeat(3, 1fr); flex: 1; }
  .tl-q { text-align: center; font-size: 12px; font-weight: 600; color: var(--text-tertiary); padding: var(--space-300); border-left: 1px solid var(--border-primary); }
  .tl-q.current { color: var(--text-brand); }

  .tl-section-head {
    display: flex; align-items: center; gap: var(--space-200);
    padding: var(--space-300) var(--space-400); background: var(--background-secondary);
    border-bottom: 1px solid var(--border-primary); font-size: 13px; font-weight: 700;
  }

  .tl-row {
    display: flex; border-bottom: 1px solid var(--border-primary); transition: background 0.1s;
  }
  .tl-row:hover { background: var(--background-primary-hover); }
  .tl-row:last-child { border-bottom: none; }
  .tl-item-label {
    width: 260px; flex-shrink: 0; padding: var(--space-300) var(--space-400);
    display: flex; align-items: center; gap: var(--space-200); font-size: 13px;
  }
  .evidence-pip { width: 8px; height: 8px; border-radius: var(--radius-full); flex-shrink: 0; }
  .evidence-pip.strong { background: var(--background-danger-prominent); }
  .evidence-pip.validating { background: var(--background-warning-prominent); }
  .evidence-pip.moderate { background: var(--background-success-prominent); }

  .tl-bars { display: grid; grid-template-columns: repeat(12, 1fr); flex: 1; align-items: center; }
  .tl-cell { height: 100%; border-left: 1px solid rgba(224,223,229,0.5); display: flex; align-items: center; }
  .bar {
    height: 26px; width: 100%; border-radius: var(--radius-100);
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; font-weight: 500;
  }
  .bar.danger { background: rgba(242,71,38,0.12); border: 1px solid rgba(242,71,38,0.25); color: var(--text-danger); }
  .bar.warning { background: rgba(255,191,0,0.12); border: 1px solid rgba(255,191,0,0.25); color: var(--text-warning); }
  .bar.success { background: rgba(35,180,94,0.12); border: 1px solid rgba(35,180,94,0.25); color: var(--text-success); }

  .pc-block { display: flex; align-items: center; gap: var(--space-400); }
  .pc-num { font-size: 28px; font-weight: 700; color: var(--text-brand); }
  .pc-label { font-size: 13px; color: var(--text-secondary); }
  .pc-sub { font-size: 11px; color: var(--text-tertiary); }

  /* === SPOTLIGHT SCREEN === */
  .spot-layout {
    display: flex; gap: 0; max-width: 1400px; margin: 0 auto;
    min-height: calc(100vh - 72px);
  }
  .spot-main { flex: 1; min-width: 0; padding-right: var(--space-500); }
  .dimmed { display: flex; gap: var(--space-300); margin-bottom: var(--space-500); }
  .dimmed-box { flex: 1; height: 72px; background: var(--background-tertiary); border-radius: var(--radius-200); opacity: 0.25; }

  .spot-panel {
    background: var(--background-primary); border: 2px solid var(--border-brand);
    border-radius: var(--radius-300); padding: var(--space-800); box-shadow: var(--elevation-400);
  }
  .spot-head { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-600); }
  .spot-title { font-size: 20px; font-weight: 700; }
  .spot-close {
    width: 32px; height: 32px; border-radius: var(--radius-200); background: var(--background-secondary);
    border: 1px solid var(--border-primary); display: flex; align-items: center; justify-content: center;
    cursor: pointer; font-size: 14px; color: var(--text-secondary);
  }

  /* Spotlight Sidekick — always-open right panel */
  .spot-sidekick {
    width: 380px; flex-shrink: 0;
    background: var(--background-primary); border-left: 1px solid var(--border-primary);
    display: flex; flex-direction: column;
    margin: -72px -32px -40px 0; padding-top: 72px;
    box-shadow: -4px 0 16px rgba(5,0,56,0.06);
  }
  .ssk-header {
    padding: var(--space-400) var(--space-500);
    border-bottom: 1px solid var(--border-primary); flex-shrink: 0;
  }
  .ssk-header-left { display: flex; align-items: center; gap: var(--space-200); }
  .ssk-body {
    flex: 1; overflow-y: auto; padding: var(--space-500);
    display: flex; flex-direction: column; gap: var(--space-400);
  }
  .ssk-footer {
    padding: var(--space-300) var(--space-500);
    border-top: 1px solid var(--border-primary); flex-shrink: 0;
  }

  .ssk-explore-section { }

  .ssk-signal-cards { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-200); }
  .ssk-signal-card {
    padding: var(--space-300); background: var(--background-secondary);
    border: 1px solid var(--border-primary); border-radius: var(--radius-200);
    cursor: pointer; transition: all 0.12s;
  }
  .ssk-signal-card:hover { border-color: var(--border-brand); background: var(--background-brand-subtle); }
  .ssk-signal-card.active { border-color: var(--border-brand); background: var(--background-brand-subtle); box-shadow: var(--elevation-100); }
  .ssk-sig-top { display: flex; align-items: center; gap: var(--space-150); margin-bottom: var(--space-100); }
  .ssk-sig-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-tertiary); }
  .ssk-sig-stat { font-size: 15px; font-weight: 700; color: var(--text-primary); }
  .ssk-sig-sub { font-size: 11px; color: var(--text-tertiary); }

  .ssk-quick-btns { display: flex; flex-wrap: wrap; gap: var(--space-150); }
  .ssk-quick-btn {
    padding: var(--space-150) var(--space-300); border-radius: var(--radius-full);
    font-size: 12px; font-weight: 500; cursor: pointer;
    border: 1px solid var(--border-primary); background: var(--background-primary);
    color: var(--text-secondary); font-family: var(--font); transition: all 0.12s;
  }
  .ssk-quick-btn:hover { border-color: var(--border-brand); color: var(--text-brand); }
  .ssk-quick-btn.used { opacity: 0.5; pointer-events: none; }

  .ssk-result {
    padding: var(--space-400); background: var(--background-secondary);
    border: 1px solid var(--border-primary); border-radius: var(--radius-200);
  }
  .ssk-result-head {
    font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
    color: var(--text-tertiary); margin-bottom: var(--space-300);
    display: flex; align-items: center; gap: var(--space-200);
  }

  .evidence-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-400); margin-bottom: var(--space-600); }
  .ep {
    background: var(--background-secondary); border-radius: var(--radius-200); padding: var(--space-500);
    border: 1px solid var(--border-primary);
  }
  .ep h4 {
    font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
    color: var(--text-secondary); margin-bottom: var(--space-300); display: flex; align-items: center; gap: var(--space-200);
  }
  .ep-stat { font-size: 22px; font-weight: 700; color: var(--text-primary); margin-bottom: var(--space-100); }
  .ep-sub { font-size: 12px; color: var(--text-secondary); margin-bottom: var(--space-300); }

  .quote {
    background: var(--background-primary); border-radius: var(--radius-200); padding: var(--space-300);
    border-left: 2px solid var(--border-brand); font-size: 12px; color: var(--text-secondary);
    line-height: 1.5; margin-bottom: var(--space-200);
  }
  .quote-attr { font-size: 11px; color: var(--text-tertiary); margin-top: var(--space-100); }

  .mini-chart { display: flex; align-items: flex-end; gap: 3px; height: 64px; padding: var(--space-200) 0; }
  .chart-bar { flex: 1; border-radius: 2px 2px 0 0; min-height: 3px; }
  .chart-bar.up { background: var(--background-success-prominent); }
  .chart-bar.flat { background: var(--background-tertiary); }

  .comp-row { display: flex; align-items: center; gap: var(--space-300); margin-bottom: var(--space-300); font-size: 12px; }
  .comp-logo {
    width: 28px; height: 28px; border-radius: var(--radius-200); background: var(--background-tertiary);
    display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 700; color: var(--text-secondary);
  }
  .comp-name { font-weight: 600; }

  .okr-item { display: flex; align-items: center; gap: var(--space-200); margin-bottom: var(--space-200); font-size: 12px; }

  .spot-actions { display: flex; gap: var(--space-200); padding-top: var(--space-500); border-top: 1px solid var(--border-primary); }

  .sidekick {
    margin-top: var(--space-500); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); overflow: hidden;
  }
  .sk-head {
    padding: var(--space-300) var(--space-400); border-bottom: 1px solid var(--border-primary);
    background: var(--background-secondary); font-size: 12px; font-weight: 600;
    color: var(--text-secondary); display: flex; align-items: center; gap: var(--space-200);
  }
  .sk-icon { width: 20px; height: 20px; border-radius: var(--radius-100); background: var(--background-brand-prominent); color: white; display: flex; align-items: center; justify-content: center; font-size: 11px; }
  .sk-body { padding: var(--space-400); }
  .sk-msg { font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-bottom: var(--space-300); }
  .sk-input { display: flex; gap: var(--space-200); }
  .sk-input input {
    flex: 1; padding: var(--space-250) var(--space-300); border-radius: var(--radius-200);
    background: var(--background-secondary); border: 1px solid var(--border-primary);
    font-size: 13px; font-family: var(--font); color: var(--text-primary);
  }
  .sk-input input::placeholder { color: var(--text-tertiary); }

  /* === CARD FLIP === */
  .flip-wrap { max-width: 600px; margin: 0 auto; }
  .flip-perspective { perspective: 1200px; margin-bottom: var(--space-800); }
  .flip-card {
    position: relative; width: 100%; min-height: 340px;
    transition: transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
  }
  .flip-card.flipped { transform: rotateY(180deg); }
  .flip-face {
    position: absolute; top: 0; left: 0; width: 100%;
    backface-visibility: hidden; border-radius: var(--radius-300);
    background: var(--background-primary); border: 1px solid var(--border-primary);
    box-shadow: var(--elevation-200);
  }
  .flip-back { transform: rotateY(180deg); }
  .flip-face-inner { padding: var(--space-600); }

  .stat-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-200); }
  .stat-box {
    text-align: center; padding: var(--space-300); background: var(--background-secondary);
    border-radius: var(--radius-200);
  }
  .stat-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-tertiary); }
  .stat-value { font-size: 18px; font-weight: 700; color: var(--text-primary); margin-top: 2px; }
  .stat-value.brand { color: var(--text-brand); }
  .stat-value.success { color: var(--text-success); }

  .back-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-300); }
  .back-cell { padding: var(--space-400); background: var(--background-secondary); border-radius: var(--radius-200); border: 1px solid var(--border-primary); }
  .back-cell h5 { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-tertiary); margin-bottom: var(--space-200); display: flex; align-items: center; gap: var(--space-150); }
  .back-cell .bc-stat { font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: var(--space-100); }
  .back-cell p { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }

  .flip-hint {
    text-align: center; font-size: 12px; color: var(--text-tertiary); cursor: pointer;
    padding: var(--space-200); display: flex; align-items: center; justify-content: center; gap: var(--space-200);
  }
  .flip-hint:hover { color: var(--text-secondary); }

  /* === TRUST PHASES === */
  .trust-wrap { max-width: 1000px; margin: 0 auto; }
  .phases { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-400); }
  .phase {
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-300); padding: var(--space-500); position: relative; overflow: hidden;
  }
  .phase::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; }
  .phase.p1::before { background: var(--background-tertiary); }
  .phase.p2::before { background: var(--background-brand-prominent); }
  .phase.p3::before { background: var(--background-warning-prominent); }
  .phase.p4::before { background: var(--background-success-prominent); }
  .phase-num { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-tertiary); margin-bottom: var(--space-150); }
  .phase-title { font-size: 15px; font-weight: 700; margin-bottom: var(--space-50); }
  .phase-sub { font-size: 13px; color: var(--text-brand); font-weight: 500; margin-bottom: var(--space-300); }
  .phase-desc { font-size: 12px; color: var(--text-secondary); line-height: 1.6; margin-bottom: var(--space-400); }
  .phase-ex {
    background: var(--background-secondary); border-radius: var(--radius-200); padding: var(--space-300);
    border: 1px solid var(--border-primary);
  }
  .phase-ex-label { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text-tertiary); margin-bottom: var(--space-150); }
  .phase-ex-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; font-style: italic; }

  /* === PLAN CONFIDENCE BAR (top of Plan screen) === */
  .plan-confidence-bar {
    display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;
    padding: var(--space-400) var(--space-500); margin-bottom: var(--space-500);
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-300); box-shadow: var(--elevation-100);
    gap: var(--space-300);
  }
  .pcb-left { display: flex; align-items: center; gap: var(--space-300); flex: 1; min-width: 0; }
  .pcb-score { font-size: 32px; font-weight: 700; color: var(--text-brand); line-height: 1; flex-shrink: 0; }
  .pcb-detail { min-width: 0; }
  .pcb-label { font-size: 14px; font-weight: 600; color: var(--text-primary); }
  .pcb-sub { font-size: 12px; color: var(--text-tertiary); margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .pcb-progress {
    flex: 1; max-width: 180px; min-width: 60px; height: 6px;
    background: var(--background-tertiary); border-radius: var(--radius-full); overflow: hidden;
  }
  .pcb-progress-fill { height: 100%; border-radius: var(--radius-full); background: var(--background-brand-prominent); }
  .pcb-right { display: flex; align-items: center; gap: var(--space-200); flex-shrink: 0; }

  /* === SIDEKICK SIDE PANEL === */
  .sidekick-overlay {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(5,0,56,0.15); z-index: 200;
    opacity: 0; pointer-events: none; transition: opacity 0.25s;
  }
  .sidekick-overlay.open { opacity: 1; pointer-events: auto; }

  body.panel-open .plan-wrap { margin-right: 460px; transition: margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  body.panel-open .briefing-wrap { margin-right: 460px; transition: margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  body.panel-open .backlog-wrap { margin-right: 460px; transition: margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

  .sidekick-panel {
    position: fixed; top: 0; right: 0; bottom: 0; width: 440px; z-index: 201;
    background: var(--background-primary); border-left: 1px solid var(--border-primary);
    box-shadow: -8px 0 32px rgba(5,0,56,0.12);
    transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex; flex-direction: column;
  }
  .sidekick-panel.open { transform: translateX(0); }

  .sp-header {
    padding: var(--space-400) var(--space-500); border-bottom: 1px solid var(--border-primary);
    display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;
  }
  .sp-header-left { display: flex; align-items: center; gap: var(--space-200); }
  .sp-ai-icon {
    width: 28px; height: 28px; border-radius: var(--radius-200);
    background: var(--background-brand-prominent); color: white;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; flex-shrink: 0;
  }
  .sp-header-title { font-size: 14px; font-weight: 700; }
  .sp-close {
    width: 28px; height: 28px; border-radius: var(--radius-200);
    background: var(--background-secondary); border: 1px solid var(--border-primary);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; font-size: 13px; color: var(--text-secondary);
    transition: background 0.12s;
  }
  .sp-close:hover { background: var(--background-tertiary); }

  .sp-body {
    flex: 1; overflow-y: auto; padding: var(--space-500);
    display: flex; flex-direction: column; gap: var(--space-400);
  }

  .sp-context {
    padding: var(--space-400); background: var(--background-secondary);
    border-radius: var(--radius-200); border: 1px solid var(--border-primary);
  }
  .sp-context-title {
    font-size: 14px; font-weight: 700; margin-bottom: var(--space-100);
    display: flex; align-items: center; gap: var(--space-200);
  }
  .sp-context-meta { font-size: 12px; color: var(--text-secondary); }

  .sp-ai-msg {
    display: flex; gap: var(--space-300); align-items: flex-start;
  }
  .sp-ai-msg .sp-ai-avatar {
    width: 24px; height: 24px; border-radius: var(--radius-100);
    background: var(--background-brand-prominent); color: white;
    display: flex; align-items: center; justify-content: center;
    font-size: 11px; flex-shrink: 0; margin-top: 2px;
  }
  .sp-ai-msg .sp-ai-text {
    font-size: 13px; color: var(--text-secondary); line-height: 1.6;
    background: var(--background-secondary); padding: var(--space-300) var(--space-400);
    border-radius: 2px var(--radius-200) var(--radius-200) var(--radius-200);
    border: 1px solid var(--border-primary);
  }

  .sp-dive-options {
    display: flex; flex-wrap: wrap; gap: var(--space-200);
  }
  .sp-dive-btn {
    display: flex; align-items: center; gap: var(--space-150);
    padding: var(--space-200) var(--space-300); border-radius: var(--radius-full);
    font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.12s;
    border: 1px solid var(--border-primary); background: var(--background-primary);
    color: var(--text-secondary); font-family: var(--font);
  }
  .sp-dive-btn:hover { border-color: var(--border-brand); color: var(--text-brand); background: var(--background-brand-subtle); }
  .sp-dive-btn.active { border-color: var(--border-brand); color: var(--text-on-brand); background: var(--background-brand-prominent); }
  .sp-dive-dot { width: 6px; height: 6px; border-radius: var(--radius-full); }

  .sp-quotes-section { display: none; }
  .sp-quotes-section.visible { display: block; }

  .sp-section-head {
    font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
    color: var(--text-tertiary); margin-bottom: var(--space-300);
    display: flex; align-items: center; gap: var(--space-200);
  }
  .sp-quote-card {
    background: var(--background-secondary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); padding: var(--space-400); margin-bottom: var(--space-200);
    border-left: 2px solid var(--border-brand); transition: background 0.12s;
  }
  .sp-quote-card:hover { background: var(--background-primary-hover); }
  .sp-quote-text { font-size: 13px; color: var(--text-primary); line-height: 1.55; margin-bottom: var(--space-200); font-style: italic; }
  .sp-quote-source { display: flex; align-items: center; justify-content: space-between; }
  .sp-quote-attr { font-size: 11px; color: var(--text-tertiary); }
  .sp-quote-tags { display: flex; gap: var(--space-100); }

  .sp-usage-card {
    background: var(--background-secondary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); padding: var(--space-400);
    margin-bottom: var(--space-200);
  }
  .sp-usage-stat { font-size: 20px; font-weight: 700; color: var(--text-primary); }
  .sp-usage-label { font-size: 12px; color: var(--text-secondary); margin-bottom: var(--space-200); }
  .sp-usage-bar-track {
    height: 8px; background: var(--background-tertiary); border-radius: var(--radius-full);
    overflow: hidden; margin-bottom: var(--space-100);
  }
  .sp-usage-bar-fill { height: 100%; border-radius: var(--radius-full); transition: width 0.5s ease; }

  .sp-footer {
    padding: var(--space-300) var(--space-500); border-top: 1px solid var(--border-primary);
    flex-shrink: 0;
  }
  .sp-input-row { display: flex; gap: var(--space-200); }
  .sp-input {
    flex: 1; padding: var(--space-250) var(--space-300); border-radius: var(--radius-200);
    background: var(--background-secondary); border: 1px solid var(--border-primary);
    font-size: 13px; font-family: var(--font); color: var(--text-primary);
    transition: border-color 0.12s;
  }
  .sp-input::placeholder { color: var(--text-tertiary); }
  .sp-input:focus { outline: none; border-color: var(--border-brand); }

  .sp-validate-btn {
    display: flex; align-items: center; gap: var(--space-150);
    padding: var(--space-200) var(--space-300); border-radius: var(--radius-200);
    font-size: 11px; font-weight: 600; cursor: pointer;
    border: 1px solid var(--border-primary); background: var(--background-primary);
    color: var(--text-secondary); font-family: var(--font); transition: all 0.12s;
    margin-top: var(--space-200);
  }
  .sp-validate-btn:hover { border-color: var(--border-success); color: var(--text-success); background: var(--background-success-subtle); }

  /* === PLAN RECOMMENDATION CARDS === */
  .sp-rec-card {
    background: var(--background-primary); border: 1px solid var(--border-primary);
    border-radius: var(--radius-200); cursor: pointer;
    transition: border-color 0.12s, box-shadow 0.12s;
  }
  .sp-rec-card:hover { border-color: var(--border-secondary); box-shadow: var(--elevation-100); }
  .sp-rec-header {
    display: flex; align-items: flex-start; gap: var(--space-200);
    padding: var(--space-300);
  }
  .sp-rec-num {
    width: 22px; height: 22px; border-radius: var(--radius-full);
    background: var(--background-brand-subtle); color: var(--text-brand);
    display: flex; align-items: center; justify-content: center;
    font-size: 11px; font-weight: 700; flex-shrink: 0; margin-top: 1px;
  }
  .sp-rec-content { flex: 1; min-width: 0; }
  .sp-rec-title { font-size: 13px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--space-50); word-break: break-word; }
  .sp-rec-tag { margin-top: var(--space-100); }
  .sp-rec-reason { font-size: 12px; color: var(--text-secondary); line-height: 1.5; word-break: break-word; }
  .sp-rec-detail {
    display: none; padding: 0 var(--space-300) var(--space-300);
    border-top: 1px solid var(--border-primary);
  }
  .sp-rec-detail.visible { display: block; padding-top: var(--space-300); }

  /* Highlight active card */
  .evidence-card.panel-active { background: var(--background-brand-subtle); border-color: var(--border-brand); }
  .kcard.panel-active { background: var(--background-brand-subtle); border-color: var(--border-brand) !important; }

  @media (max-width: 900px) {
    .kanban { grid-template-columns: 1fr 1fr; }
    .evidence-grid { grid-template-columns: 1fr; }
    .phases { grid-template-columns: 1fr 1fr; }
    .sidekick-panel { width: 100%; }
    .spot-layout { flex-direction: column; }
    .spot-main { padding-right: 0; }
    .spot-sidekick { width: 100%; margin: var(--space-500) 0 0; border-left: none; border-top: 1px solid var(--border-primary); padding-top: 0; }
  }
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-logo">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="3" stroke="currentColor" stroke-width="2"/><path d="M7 8h10M7 12h7M7 16h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
    Miro Roadmaps
  </div>
  <div class="tab-list">
    <button class="tab active" onclick="go('briefing',this)">The Briefing</button>
    <button class="tab" onclick="go('backlog',this)">The Backlog</button>
    <button class="tab" onclick="go('plan',this)">The Plan</button>
    <button class="tab" onclick="go('spotlight',this)">Spotlight</button>
    <button class="tab" onclick="go('flip',this)">Card Flip</button>
    <button class="tab" onclick="go('trust',this)">Trust Phases</button>
  </div>
</nav>

<!-- BRIEFING -->
<div id="briefing" class="screen active">
  <div class="briefing-wrap">
    <div class="callout callout-info" style="margin-bottom:var(--space-400); font-size:12px; max-width:720px; margin-left:auto; margin-right:auto;">
      <div class="callout-icon" style="font-size:14px;">ℹ️</div>
      <div><strong>UX concept prototype.</strong> All data shown is placeholder — items labelled [Example] represent where real data from connected sources (customer calls, analytics, strategy docs, competitor tracking) would appear.</div>
    </div>
    <div class="screen-header">
      <div class="screen-title">Zone 1: The Briefing</div>
      <div class="screen-desc">3–7 finite evidence cards using MDS Tag, Button, Callout, and Slider components. Confidence communicated via Tag variants (danger/warning/primary).</div>
    </div>

    <!-- Summary tiles -->
    <div class="briefing-tiles">
      <div class="btile btile-success" onclick="openBriefingTile('strengthened')">
        <div class="btile-num">2</div>
        <div class="btile-label">Strengthened</div>
        <div class="btile-arrow">↑</div>
      </div>
      <div class="btile btile-new" onclick="openBriefingTile('new')">
        <div class="btile-num">1</div>
        <div class="btile-label">New signal</div>
        <div class="btile-arrow">+</div>
      </div>
      <div class="btile btile-danger" onclick="openBriefingTile('weakened')">
        <div class="btile-num">1</div>
        <div class="btile-label">Weakened</div>
        <div class="btile-arrow">↓</div>
      </div>
      <div class="btile btile-neutral" onclick="openBriefingTile('unchanged')">
        <div class="btile-num">3</div>
        <div class="btile-label">Unchanged</div>
        <div class="btile-arrow">—</div>
      </div>
      <div class="btile btile-confidence" onclick="goToPlanWithSidekick()">
        <div class="btile-num">72%</div>
        <div class="btile-label">Plan confidence</div>
        <div class="btile-bar"><div class="btile-bar-fill" style="width:72%"></div></div>
      </div>
    </div>

    <div class="briefing-bar">
      <h2>Your Briefing</h2>
      <div class="meta">Feb 19, 2026 · Updated 2h ago · ~3 min read</div>
    </div>

    <!-- HIGH card -->
    <div class="evidence-card border-danger" onclick="openPanel('jira-custom-fields',this)" style="cursor:pointer">
      <div class="ec-header">
        <span></span>
        <span class="tag tag-danger-subtle">High confidence</span>
      </div>
      <div class="ec-headline">[Example] Feature request demand surged this quarter</div>
      <div class="signal-grid">
        <div class="signal-item">
          <div class="signal-dot voc"></div>
          <div><div class="signal-type">Voice of Customer</div><div class="signal-text"><strong>N mentions</strong> · N accounts · $N ARR</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot usage"></div>
          <div><div class="signal-type">Usage</div><div class="signal-text">Connected users have <strong>higher engagement</strong></div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot strategy"></div>
          <div><div class="signal-type">Strategy</div><div class="signal-text">Maps to <strong>OKR: [Key Result]</strong></div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot market"></div>
          <div><div class="signal-type">Market</div><div class="signal-text"><strong>Competitor</strong> shipped this recently</div></div>
        </div>
      </div>
      <div class="ec-interpretation">
        <span class="arrow">▸</span> ✦ Cross-signal pattern: demand accelerating while the window for differentiation narrows.
      </div>
      <div class="ec-actions">
        <button class="btn btn-sm btn-primary">Investigate</button>
        <button class="btn btn-sm btn-secondary">View evidence</button>
        <button class="btn btn-sm btn-tertiary">Go to backlog item</button>
      </div>
    </div>

    <!-- MEDIUM card -->
    <div class="evidence-card border-warning" onclick="openPanel('silent-abandonment',this)" style="cursor:pointer">
      <div class="ec-header">
        <span></span>
        <span class="tag tag-warning-subtle">Medium confidence</span>
      </div>
      <div class="ec-headline">[Example] Feature adoption below threshold — silent abandonment detected</div>
      <div class="signal-grid">
        <div class="signal-item">
          <div class="signal-dot empty"></div>
          <div><div class="signal-type">Voice of Customer</div><div class="signal-text"><strong>No complaints</strong> — that's the concern</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot usage"></div>
          <div><div class="signal-type">Usage</div><div class="signal-text"><strong>Declining adoption</strong> over recent weeks</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot strategy"></div>
          <div><div class="signal-type">Strategy</div><div class="signal-text">Supports <strong>OKR: [Adoption target]</strong></div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot empty"></div>
          <div><div class="signal-type">Market</div><div class="signal-text" style="color:var(--text-tertiary)">No competitor activity</div></div>
        </div>
      </div>
      <div class="ec-interpretation">
        <span class="arrow">▸</span> ✦ Anomaly: usage declining without complaints — users silently abandoning rather than requesting improvements.
      </div>
      <div class="ec-actions">
        <button class="btn btn-sm btn-secondary">View evidence</button>
        <button class="btn btn-sm btn-tertiary">Watch</button>
        <button class="btn btn-sm btn-ghost">Dismiss</button>
      </div>
    </div>

    <!-- NEW SIGNAL card -->
    <div class="evidence-card border-brand" onclick="openPanel('portfolio-view',this)" style="cursor:pointer">
      <div class="ec-header">
        <span></span>
        <span class="tag tag-primary-subtle">New signal</span>
      </div>
      <div class="ec-headline">[Example] Enterprise accounts raised a new topic — wasn't in your top 20</div>
      <div class="signal-grid">
        <div class="signal-item">
          <div class="signal-dot voc"></div>
          <div><div class="signal-type">Voice of Customer</div><div class="signal-text"><strong>N accounts</strong> · $N combined ARR</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot empty"></div>
          <div><div class="signal-type">Usage</div><div class="signal-text" style="color:var(--text-tertiary)">Not enough data yet</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot empty"></div>
          <div><div class="signal-type">Strategy</div><div class="signal-text" style="color:var(--text-tertiary)">Not yet mapped</div></div>
        </div>
        <div class="signal-item">
          <div class="signal-dot empty"></div>
          <div><div class="signal-type">Market</div><div class="signal-text" style="color:var(--text-tertiary)">Not enough data yet</div></div>
        </div>
      </div>
      <div class="ec-actions">
        <button class="btn btn-sm btn-secondary">Watch</button>
        <button class="btn btn-sm btn-tertiary">Create backlog item</button>
        <button class="btn btn-sm btn-ghost">Dismiss</button>
      </div>
    </div>

  </div>
</div>

<!-- BACKLOG -->
<div id="backlog" class="screen">
  <div class="backlog-wrap">
    <div class="screen-header">
      <div class="screen-title">Zone 2: The Backlog</div>
      <div class="screen-desc">Enriched Kanban with an AI-populated "Signals" column. Uses MDS Tag variants for confidence and signal dots for evidence coverage. Drag right to decide.</div>
    </div>

    <div class="toolbar">
      <div class="tab-list">
        <button class="tab active">◫ Kanban</button>
        <button class="tab">≡ Table</button>
        <button class="tab">━ Timeline</button>
      </div>
      <div class="toolbar-spacer"></div>
      <button class="btn btn-sm btn-secondary">Sort: Evidence strength ▾</button>
      <button class="btn btn-sm btn-secondary">Framework: RICE ▾</button>
      <button class="btn btn-sm btn-primary">+ Add item</button>
    </div>

    <div class="kanban">
      <div class="kanban-col" style="border-top:2px solid var(--background-brand-prominent)">
        <div class="col-head">
          <div><div class="col-title" style="color:var(--text-brand)">✦ Signals</div><div class="col-sub">AI-populated</div></div>
          <div class="col-count">3</div>
        </div>
        <div class="kcard ai-border" onclick="openPanel('portfolio-view',this)" style="cursor:pointer">
          <div class="ai-label">✦ AI suggested</div>
          <div class="kcard-top"><div class="kcard-title">[Example] New emerging signal</div><span class="tag tag-primary-subtle">New</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot off" style="background:var(--background-success-prominent)"></div><div class="kcard-dot off" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>N accounts · $N ARR</span></div>
        </div>
        <div class="kcard ai-border" onclick="openPanel('ai-table-setup',this)" style="cursor:pointer">
          <div class="ai-label">✦ AI suggested</div>
          <div class="kcard-top"><div class="kcard-title">[Example] AI-assisted setup</div><span class="tag tag-warning-subtle">Med</span></div>
          <div class="kcard-dots"><div class="kcard-dot off" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Usage anomaly detected</span><span class="kcard-score">RICE: ––</span></div>
        </div>
        <div class="kcard ai-border" onclick="openPanel('silent-abandonment',this)" style="cursor:pointer">
          <div class="ai-label">✦ Anomaly detected</div>
          <div class="kcard-top"><div class="kcard-title">[Example] Silent abandonment</div><span class="tag tag-warning-subtle">Med</span></div>
          <div class="kcard-dots"><div class="kcard-dot off" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Adoption declining</span>
        </div>
      </div>

      <div class="kanban-col" style="border-top:2px solid var(--background-warning-prominent)">
        <div class="col-head"><div><div class="col-title" style="color:var(--text-warning)">Triage</div><div class="col-sub">Under review</div></div><div class="col-count">2</div></div>
        <div class="kcard" onclick="openPanel('jira-custom-fields',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] High-evidence feature</div><span class="tag tag-danger-subtle">High</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot on" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>N mentions · $N ARR</span><span class="kcard-score">RICE: ––</span></div>
        </div>
        <div class="kcard" onclick="openPanel('kanban-deps',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] Dependency feature</div><span class="tag tag-warning-subtle">Med</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot off" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Enterprise requested</span><span class="kcard-score">RICE: ––</span></div>
        </div>
      </div>

      <div class="kanban-col" style="border-top:2px solid var(--background-danger-prominent)">
        <div class="col-head"><div><div class="col-title" style="color:var(--text-danger)">Now</div><div class="col-sub">In progress</div></div><div class="col-count">2</div></div>
        <div class="kcard" onclick="openPanel('performance-at-scale',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] Performance item</div><span class="tag tag-danger-subtle">High</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Enterprise blocker</span><span class="kcard-score">RICE: ––</span></div>
        </div>
        <div class="kcard" onclick="openPanel('convert-rows-jira',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] Integration feature</div><span class="tag tag-danger-subtle">High</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot on" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Confirmed build</span><span class="kcard-score">RICE: ––</span></div>
        </div>
      </div>

      <div class="kanban-col" style="border-top:2px solid var(--background-success-prominent)">
        <div class="col-head"><div><div class="col-title" style="color:var(--text-success)">Next</div><div class="col-sub">Planned</div></div><div class="col-count">3</div></div>
        <div class="kcard" onclick="openPanel('enriched-backlog',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] Evidence-enriched feature</div><span class="tag tag-danger-subtle">High</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot off" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot on" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Competitor migration opp.</span><span class="kcard-score">RICE: ––</span></div>
        </div>
        <div class="kcard" onclick="openPanel('views-parity',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] Usability parity</div><span class="tag tag-warning-subtle">Med</span></div>
          <div class="kcard-dots"><div class="kcard-dot on" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot on" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot off" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Quarterly planning</span><span class="kcard-score">RICE: ––</span></div>
        </div>
        <div class="kcard" onclick="openPanel('ai-signal-synthesis',this)" style="cursor:pointer">
          <div class="kcard-top"><div class="kcard-title">[Example] AI synthesis feasibility</div><span class="tag tag-warning-subtle">Med</span></div>
          <div class="kcard-dots"><div class="kcard-dot off" style="background:var(--background-brand-prominent)"></div><div class="kcard-dot off" style="background:var(--background-success-prominent)"></div><div class="kcard-dot on" style="background:var(--background-danger-prominent)"></div><div class="kcard-dot on" style="background:var(--background-warning-prominent)"></div></div>
          <div class="kcard-meta"><span>Leapfrog bet</span><span class="kcard-score">RICE: ––</span></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PLAN -->
<div id="plan" class="screen">
  <div class="plan-wrap">
    <div class="screen-header">
      <div class="screen-title">Zone 3: The Plan</div>
      <div class="screen-desc">Timeline with evidence overlay. Each item's confidence is visible via MDS Tag-colored pips. Stakeholders see what's committed and how well-supported it is.</div>
    </div>

    <div class="plan-confidence-bar">
      <div class="pcb-left">
        <div class="pcb-score">72%</div>
        <div class="pcb-detail">
          <div class="pcb-label">Plan confidence</div>
          <div class="pcb-sub">N of N items have strong evidence · N still validating</div>
        </div>
        <div class="pcb-progress"><div class="pcb-progress-fill" style="width:72%"></div></div>
      </div>
      <div class="pcb-right">
        <div class="callout callout-warning" style="padding:var(--space-200) var(--space-300); font-size:12px;">
          <div class="callout-icon" style="font-size:13px;">⚠️</div>
          <div><strong>[Example] Initiative 3</strong> still validating</div>
        </div>
        <button class="btn btn-sm btn-primary" onclick="openPlanSidekick()" style="gap:var(--space-150);">✦ Suggested actions</button>
      </div>
    </div>

    <div class="tl-container">
      <div class="tl-head">
        <div class="tl-label-col">Initiative</div>
        <div class="tl-quarters"><div class="tl-q current">Q1 FY27</div><div class="tl-q">Q2 FY27</div><div class="tl-q">Q3 FY27</div></div>
      </div>
      <div class="tl-section-head">[Example] OKR 1: Key Result A <span class="tag tag-primary-subtle">Track A</span></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip strong"></div>[Example] Initiative 1</div><div class="tl-bars"><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip strong"></div>[Example] Initiative 2</div><div class="tl-bars"><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip validating"></div>[Example] Initiative 3</div><div class="tl-bars"><div class="tl-cell"></div><div class="tl-cell"><div class="bar warning"></div></div><div class="tl-cell"><div class="bar warning"></div></div><div class="tl-cell"><div class="bar warning"></div></div><div class="tl-cell"><div class="bar warning"></div></div><div class="tl-cell"><div class="bar warning"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip moderate"></div>[Example] Initiative 4</div><div class="tl-bars"><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>

      <div class="tl-section-head">[Example] OKR 2: Key Result B <span class="tag tag-success-subtle">Track B</span></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip strong"></div>[Example] Initiative 5</div><div class="tl-bars"><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip strong"></div>[Example] Initiative 6</div><div class="tl-bars"><div class="tl-cell"></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"><div class="bar danger"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
      <div class="tl-row"><div class="tl-item-label"><div class="evidence-pip moderate"></div>[Example] Initiative 7</div><div class="tl-bars"><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"><div class="bar success"></div></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div><div class="tl-cell"></div></div></div>
    </div>
  </div>
</div>

<!-- SPOTLIGHT -->
<div id="spotlight" class="screen">
  <div class="spot-layout">
    <!-- LEFT: Evidence panels -->
    <div class="spot-main">
      <div class="screen-header">
        <div class="screen-title">The Spotlight</div>
        <div class="screen-desc">Focused investigation mode with AI Sidekick. Evidence panels on the left, conversational exploration on the right.</div>
      </div>
      <div class="dimmed"><div class="dimmed-box"></div><div class="dimmed-box"></div><div class="dimmed-box"></div></div>
      <div class="spot-panel">
        <div class="spot-head">
          <div><span class="tag tag-danger-subtle" style="margin-bottom:var(--space-200); display:inline-flex;">High confidence</span><div class="spot-title">[Example] Feature Under Investigation</div></div>
          <div class="spot-close">✕</div>
        </div>
        <div class="evidence-grid">
          <div class="ep">
            <h4><div class="signal-dot voc" style="margin-top:0"></div> Voice of Customer</h4>
            <div class="ep-stat">N <span style="font-size:13px; font-weight:400; color:var(--text-secondary)">mentions</span></div>
            <div class="ep-sub">N accounts · $N ARR · trending up vs last quarter</div>
            <div class="quote">"[Example customer quote from a Gong call expressing urgency for this feature.]"<div class="quote-attr">— [Account], [Role]</div></div>
            <div class="quote">"[Example customer quote indicating competitive threat if not prioritised.]"<div class="quote-attr">— [Account], [Role]</div></div>
          </div>
          <div class="ep">
            <h4><div class="signal-dot usage" style="margin-top:0"></div> Usage Data</h4>
            <div class="ep-stat">Nx <span style="font-size:13px; font-weight:400; color:var(--text-secondary)">engagement</span></div>
            <div class="ep-sub">Connected users vs baseline</div>
            <div class="mini-chart">
              <div class="chart-bar up" style="height:18%"></div><div class="chart-bar up" style="height:24%"></div><div class="chart-bar up" style="height:28%"></div><div class="chart-bar up" style="height:34%"></div><div class="chart-bar up" style="height:42%"></div><div class="chart-bar up" style="height:48%"></div><div class="chart-bar up" style="height:56%"></div><div class="chart-bar up" style="height:64%"></div><div class="chart-bar up" style="height:72%"></div><div class="chart-bar up" style="height:80%"></div><div class="chart-bar up" style="height:88%"></div><div class="chart-bar up" style="height:96%"></div>
            </div>
            <div style="font-size:11px; color:var(--text-tertiary)">Active days/month: connected vs baseline (12-month trend)</div>
          </div>
          <div class="ep">
            <h4><div class="signal-dot strategy" style="margin-top:0"></div> Strategy Alignment</h4>
            <div class="okr-item"><span style="color:var(--text-success)">●</span> <strong>[Example] OKR 1</strong> — Key Result A</div>
            <div class="okr-item"><span style="color:var(--text-success)">●</span> <strong>[Example] OKR 2</strong> — Key Result B</div>
            <div class="okr-item"><span style="color:var(--text-tertiary)">○</span> <span style="color:var(--text-tertiary)">[Example] OKR 3 — indirect</span></div>
            <div class="okr-item"><span style="color:var(--text-tertiary)">○</span> <span style="color:var(--text-tertiary)">[Example] OKR 4 — not primary</span></div>
            <div style="margin-top:var(--space-300); font-size:12px; color:var(--text-secondary); line-height:1.5;">Direct tie to key business targets through enterprise deal enablement.</div>
          </div>
          <div class="ep">
            <h4><div class="signal-dot market" style="margin-top:0"></div> Market Context</h4>
            <div class="comp-row"><div class="comp-logo">C1</div><div style="flex:1"><div class="comp-name">[Competitor 1]</div><div style="font-size:11px; color:var(--text-tertiary)">Shipped this feature recently</div></div><span class="tag tag-danger-subtle">GA</span></div>
            <div class="comp-row"><div class="comp-logo">C2</div><div style="flex:1"><div class="comp-name">[Competitor 2]</div><div style="font-size:11px; color:var(--text-tertiary)">In beta for this feature</div></div><span class="tag tag-warning-subtle">Beta</span></div>
            <div class="comp-row"><div class="comp-logo">C3</div><div style="flex:1"><div class="comp-name">[Competitor 3]</div><div style="font-size:11px; color:var(--text-tertiary)">No equivalent feature</div></div><span class="tag tag-neutral">N/A</span></div>
          </div>
        </div>
        <div class="spot-actions">
          <button class="btn btn-md btn-primary">Promote to roadmap</button>
          <div style="flex:1"></div>
          <button class="btn btn-md btn-tertiary">Snooze</button>
          <button class="btn btn-md btn-ghost">Dismiss</button>
        </div>
      </div>
    </div>

    <!-- RIGHT: Sidekick always-open panel -->
    <div class="spot-sidekick">
      <div class="ssk-header">
        <div class="ssk-header-left">
          <div class="sp-ai-icon">✦</div>
          <div>
            <div style="font-size:14px; font-weight:700;">Sidekick</div>
            <div style="font-size:11px; color:var(--text-tertiary);">Investigating [Example Feature]</div>
          </div>
        </div>
      </div>

      <div class="ssk-body" id="sskBody">
        <div class="sp-ai-msg">
          <div class="sp-ai-avatar">✦</div>
          <div class="sp-ai-text">I've loaded all evidence for <strong>[Example Feature]</strong>. What would you like to explore?</div>
        </div>

        <div class="ssk-explore-section">
          <div style="font-size:11px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:var(--space-200);">Dive into signals</div>
          <div class="ssk-signal-cards">
            <div class="ssk-signal-card" onclick="spotSignal('voc', this)">
              <div class="ssk-sig-top">
                <div class="signal-dot voc" style="margin-top:0"></div>
                <div class="ssk-sig-label">Voice of Customer</div>
              </div>
              <div class="ssk-sig-stat">N mentions</div>
              <div class="ssk-sig-sub">N accounts · $N ARR</div>
            </div>
            <div class="ssk-signal-card" onclick="spotSignal('usage', this)">
              <div class="ssk-sig-top">
                <div class="signal-dot usage" style="margin-top:0"></div>
                <div class="ssk-sig-label">Usage Data</div>
              </div>
              <div class="ssk-sig-stat">Nx engagement</div>
              <div class="ssk-sig-sub">Connected vs baseline users</div>
            </div>
            <div class="ssk-signal-card" onclick="spotSignal('strategy', this)">
              <div class="ssk-sig-top">
                <div class="signal-dot strategy" style="margin-top:0"></div>
                <div class="ssk-sig-label">Strategy</div>
              </div>
              <div class="ssk-sig-stat">OKR 1 + 2</div>
              <div class="ssk-sig-sub">Key business targets</div>
            </div>
            <div class="ssk-signal-card" onclick="spotSignal('market', this)">
              <div class="ssk-sig-top">
                <div class="signal-dot market" style="margin-top:0"></div>
                <div class="ssk-sig-label">Market</div>
              </div>
              <div class="ssk-sig-stat">N of N</div>
              <div class="ssk-sig-sub">competitors shipped</div>
            </div>
          </div>
        </div>

        <div class="ssk-explore-section">
          <div style="font-size:11px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:var(--space-200);">Quick questions</div>
          <div class="ssk-quick-btns">
            <button class="ssk-quick-btn" onclick="spotQuick('Show me the strongest customer quotes', this)">Strongest customer quotes</button>
            <button class="ssk-quick-btn" onclick="spotQuick('Which accounts have the highest churn risk?', this)">Accounts with churn risk</button>
            <button class="ssk-quick-btn" onclick="spotQuick('What would happen if we delay this by a quarter?', this)">Impact of delaying a quarter</button>
            <button class="ssk-quick-btn" onclick="spotQuick('Compare our approach to competitors', this)">Compare to competitors</button>
            <button class="ssk-quick-btn" onclick="spotQuick('What is the effort estimate from engineering?', this)">Engineering effort estimate</button>
            <button class="ssk-quick-btn" onclick="spotQuick('Show related customer calls', this)">Related customer calls</button>
          </div>
        </div>

        <div id="sskDynamic"></div>
      </div>

      <div class="ssk-footer">
        <div class="sp-input-row">
          <input class="sp-input" id="sskInput" placeholder="Ask anything about this item…" onkeydown="if(event.key==='Enter')sendSpotMsg()">
          <button class="btn btn-sm btn-primary" onclick="sendSpotMsg()">Ask</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CARD FLIP -->
<div id="flip" class="screen">
  <div class="flip-wrap">
    <div class="screen-header">
      <div class="screen-title">The Card Flip</div>
      <div class="screen-desc">Front face: scannable summary with MDS stat blocks. Back face: 4-quadrant evidence in spatially consistent positions. Click the card to flip.</div>
    </div>
    <div class="flip-perspective">
      <div class="flip-card" onclick="this.classList.toggle('flipped')">
        <div class="flip-face" style="padding:0;">
          <div class="flip-face-inner">
            <div style="display:flex; justify-content:space-between; align-items:flex-start;">
              <span class="tag tag-danger-subtle">High confidence</span>
              <span style="font-size:11px; color:var(--text-tertiary)">Click to flip →</span>
            </div>
            <div style="font-size:18px; font-weight:700; margin:var(--space-400) 0 var(--space-200);">[Example] Feature request demand surged</div>
            <div style="font-size:13px; color:var(--text-secondary); line-height:1.55; margin-bottom:var(--space-500);">N mentions across N accounts ($N ARR). Connected users have higher engagement. Maps to key business OKRs. Competitor shipped this recently.</div>
            <div class="ec-interpretation" style="margin:0 0 var(--space-500);">
              <span class="arrow">▸</span> ✦ Cross-signal pattern: competitor gap closing while demand accelerates.
            </div>
            <div class="stat-row">
              <div class="stat-box"><div class="stat-label">RICE</div><div class="stat-value">––</div></div>
              <div class="stat-box"><div class="stat-label">Signals</div><div class="stat-value brand">4/4</div></div>
              <div class="stat-box"><div class="stat-label">ARR</div><div class="stat-value">$N</div></div>
              <div class="stat-box"><div class="stat-label">Trend</div><div class="stat-value success">↑</div></div>
            </div>
          </div>
        </div>
        <div class="flip-face flip-back" style="padding:0;">
          <div class="flip-face-inner">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:var(--space-400);">
              <span style="font-size:15px; font-weight:700;">Evidence Detail</span>
              <span style="font-size:11px; color:var(--text-tertiary)">Click to flip back →</span>
            </div>
            <div class="back-grid">
              <div class="back-cell"><h5><div class="signal-dot voc" style="margin-top:0"></div> Voice of Customer</h5><div class="bc-stat">N</div><p>mentions · N accounts<br>$N combined ARR<br>trending up vs last quarter<br><em>"[Example customer quote]"</em></p></div>
              <div class="back-cell"><h5><div class="signal-dot usage" style="margin-top:0"></div> Usage Data</h5><div class="bc-stat">Nx</div><p>engagement multiplier<br>Connected vs baseline<br>Higher retention<br>Strongest driver found</p></div>
              <div class="back-cell"><h5><div class="signal-dot strategy" style="margin-top:0"></div> Strategy</h5><div class="bc-stat">OKR 1+2</div><p>Key business target<br>Enterprise deal enabler<br>Demo talking point<br>Also supports adoption</p></div>
              <div class="back-cell"><h5><div class="signal-dot market" style="margin-top:0"></div> Market</h5><div class="bc-stat">N/N</div><p>competitors shipped<br>[Competitor 1]: GA<br>[Competitor 2]: Beta<br>Window: closing</p></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flip-hint" onclick="document.querySelector('.flip-card').classList.toggle('flipped')">↻ Click the card to flip between summary and evidence</div>
  </div>
</div>

<!-- TRUST PHASES -->
<div id="trust" class="screen">
  <div class="trust-wrap">
    <div class="screen-header">
      <div class="screen-title">Progressive Trust Building</div>
      <div class="screen-desc">The AI's role evolves over 12 weeks. MDS Tag shades (subtle → prominent) mirror the increasing confidence of AI contributions.</div>
    </div>
    <div class="phases">
      <div class="phase p1">
        <div class="phase-num">Phase 1</div>
        <div class="phase-title">Weeks 1–2</div>
        <div class="phase-sub">"I know things you know"</div>
        <span class="tag tag-neutral" style="margin-bottom:var(--space-300); display:inline-flex;">AI: Librarian</span>
        <div class="phase-desc">Organises, deduplicates, finds gaps. Nothing non-obvious — building the trust account before withdrawals.</div>
        <div class="phase-ex"><div class="phase-ex-label">Example</div><div class="phase-ex-text">"You have 40 items but none address retention — is that intentional?"</div></div>
      </div>
      <div class="phase p2">
        <div class="phase-num">Phase 2</div>
        <div class="phase-title">Weeks 3–4</div>
        <div class="phase-sub">"Here's what the data says"</div>
        <span class="tag tag-primary-subtle" style="margin-bottom:var(--space-300); display:inline-flex;">AI: Analyst</span>
        <div class="phase-desc">Evidence cards appear in the Briefing. Only facts — no interpretation. PM can verify every claim.</div>
        <div class="phase-ex"><div class="phase-ex-label">Example</div><div class="phase-ex-text">"N customers mentioned [feature] this quarter. Here are the top quotes and ARR breakdown."</div></div>
      </div>
      <div class="phase p3">
        <div class="phase-num">Phase 3</div>
        <div class="phase-title">Weeks 5–8</div>
        <div class="phase-sub">"I noticed something"</div>
        <span class="tag tag-warning-subtle" style="margin-bottom:var(--space-300); display:inline-flex;">AI: Observer</span>
        <div class="phase-desc">Cross-signal connections. Signals column activates. Anomaly detection surfaces changes. Observation, not directive.</div>
        <div class="phase-ex"><div class="phase-ex-label">Example</div><div class="phase-ex-text">"Feature X demand is up AND adoption is down AND Competitor Y shipped it. This wasn't true last month."</div></div>
      </div>
      <div class="phase p4">
        <div class="phase-num">Phase 4</div>
        <div class="phase-title">Month 3+</div>
        <div class="phase-sub">"This should change your plan"</div>
        <span class="tag tag-success-subtle" style="margin-bottom:var(--space-300); display:inline-flex;">AI: Advisor</span>
        <div class="phase-desc">Earned recommendations framed with evidence and confidence. The PM decides, but the AI has earned the right to suggest.</div>
        <div class="phase-ex"><div class="phase-ex-label">Example</div><div class="phase-ex-text">"Based on converging signals, Feature X may deserve higher priority than Feature Z. Here's the comparison."</div></div>
      </div>
    </div>
  </div>
</div>

<!-- SIDEKICK SIDE PANEL -->
<div class="sidekick-overlay" id="skOverlay" onclick="closePanel()"></div>
<div class="sidekick-panel" id="skPanel">
  <div class="sp-header">
    <div class="sp-header-left">
      <div class="sp-ai-icon">✦</div>
      <div class="sp-header-title">Sidekick</div>
    </div>
    <div class="sp-close" onclick="closePanel()">✕</div>
  </div>
  <div class="sp-body" id="skBody"></div>
  <div class="sp-footer">
    <div class="sp-input-row">
      <input class="sp-input" id="skInput" placeholder="Ask a follow-up question…" onkeydown="if(event.key==='Enter')sendMsg()">
      <button class="btn btn-sm btn-primary" onclick="sendMsg()">Ask</button>
    </div>
  </div>
</div>

<script>
const CARD_DATA = {
  'jira-custom-fields': {
    title: '[Example] High-Evidence Feature Request',
    tag: 'tag-danger-subtle', tagText: 'High confidence',
    meta: 'N mentions · N accounts · $N ARR',
    signals: {voc:true, usage:true, strategy:true, market:true},
    quotes: [
      { text: '[Example] Internal sales teams consistently hearing this request in demos and customer calls.', source: '[Role], [Team]', type: 'Internal', channel: 'Customer call' },
      { text: '[Example] Customer expressing urgency: this is a dealbreaker for their team and they are evaluating competitors.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Engineering teams at customer orgs cite this gap as the #1 reason they resist adopting the product for planning.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Customer needs specific field types that aren\'t currently supported — without them, the tool feels incomplete.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
    ],
    usage: [
      { label: 'Connected user engagement', value: 'Nx', detail: 'Higher active days/month vs baseline', pct: 80, color: 'var(--background-success-prominent)' },
      { label: 'Connected user retention', value: 'N%', detail: 'vs lower for non-connected users', pct: 52, color: 'var(--background-success-prominent)' },
      { label: 'Feature requests trending', value: '↑', detail: 'Quarter-over-quarter increase', pct: 65, color: 'var(--background-danger-prominent)' },
    ],
    strategy: ['[Example] OKR 1 — Key business target (direct)', '[Example] OKR 2 — Adoption target (direct)'],
    market: ['[Competitor 1]: Shipped this feature — GA', '[Competitor 2]: Similar feature — Beta', '[Competitor 3]: No equivalent feature'],
  },
  'silent-abandonment': {
    title: '[Example] Silent Abandonment Detected',
    tag: 'tag-warning-subtle', tagText: 'Medium confidence',
    meta: 'Adoption declining over recent weeks · No customer complaints',
    signals: {voc:false, usage:true, strategy:true, market:false},
    quotes: [
      { text: '[Example] No direct customer feedback about this decline — which is the worrying part. Users aren\'t complaining, they\'re just leaving.', source: 'Analytics observation', type: 'Internal', channel: 'Usage data' },
    ],
    usage: [
      { label: 'Feature adoption rate', value: '↓', detail: 'Declining over recent weeks', pct: 47, color: 'var(--background-danger-prominent)' },
      { label: 'Users who adopted → retained', value: 'N%', detail: 'High retention IF they adopt — activation is the issue', pct: 68, color: 'var(--background-success-prominent)' },
    ],
    strategy: ['[Example] OKR: Adoption target (supports)'],
    market: [],
  },
  'portfolio-view': {
    title: '[Example] New Emerging Signal',
    tag: 'tag-primary-subtle', tagText: 'New signal',
    meta: 'N accounts · $N combined ARR · Emerging',
    signals: {voc:true, usage:false, strategy:false, market:false},
    quotes: [
      { text: '[Example] Customer needs a single view across all product roadmaps with health status. Currently using spreadsheets.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Customer evaluating competitors specifically because of this gap. Would stay if the product supported it natively.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Leadership wants a roll-up view across all teams — currently everything is siloed.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
    ],
    usage: [],
    strategy: [],
    market: [],
  },
  'performance-at-scale': {
    title: '[Example] Performance at Scale',
    tag: 'tag-danger-subtle', tagText: 'High confidence',
    meta: 'Enterprise blocker · Large datasets causing issues',
    signals: {voc:true, usage:true, strategy:true, market:false},
    quotes: [
      { text: '[Example] Customer hit performance limits during a quarterly planning session — the tool froze completely.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Internal analysis shows large record sets cause unacceptable load times — a non-starter for enterprise use cases.', source: 'Internal analysis', type: 'Internal', channel: 'Internal analysis' },
    ],
    usage: [
      { label: 'Large dataset load time', value: 'Slow', detail: 'Above target threshold', pct: 95, color: 'var(--background-danger-prominent)' },
      { label: 'Complex view load time', value: 'Slow', detail: 'Above target threshold', pct: 60, color: 'var(--background-warning-prominent)' },
    ],
    strategy: ['[Example] OKR 1 — Hard blocker for enterprise deals', '[Example] OKR 2 — Enterprise churn risk'],
    market: [],
  },
  'convert-rows-jira': {
    title: '[Example] Integration Feature',
    tag: 'tag-danger-subtle', tagText: 'High confidence',
    meta: 'Confirmed build · Sales requesting consistently',
    signals: {voc:true, usage:true, strategy:true, market:true},
    quotes: [
      { text: '[Example] Internal sales team says this would change how teams plan — a killer feature.', source: '[Role], [Team]', type: 'Internal', channel: 'Internal feedback' },
      { text: '[Example] Customer teams brainstorm in one tool then manually copy to another — this integration would save hours.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
    ],
    usage: [
      { label: 'Connected user engagement', value: 'Nx', detail: 'Active days/month vs non-connected', pct: 80, color: 'var(--background-success-prominent)' },
    ],
    strategy: ['[Example] OKR 1 — Enterprise deal enabler', '[Example] OKR 2 — Workflow completion'],
    market: ['[Competitor 1]: Native integration — GA', '[Competitor 2]: Integration with sync — GA'],
  },
  'enriched-backlog': {
    title: '[Example] Evidence-Enriched Feature',
    tag: 'tag-danger-subtle', tagText: 'High confidence',
    meta: 'Competitor migration opportunity',
    signals: {voc:true, usage:false, strategy:true, market:true},
    quotes: [
      { text: '[Example] Customer evaluating alternatives — if they could see customer evidence per backlog item, that would be compelling.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
      { text: '[Example] Customer wants to see how many accounts requested a feature, total ARR, and top quotes — right on the backlog item.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer interview' },
    ],
    usage: [],
    strategy: ['[Example] OKR 1 — Sellable product line', '[Example] OKR 4 — AI-first'],
    market: ['[Competitor 1]: AI feedback synthesis — GA', '[Competitor 2]: Customer evidence per feature — GA'],
  },
  'kanban-deps': {
    title: '[Example] Dependency Feature',
    tag: 'tag-warning-subtle', tagText: 'Medium confidence',
    meta: 'Enterprise requested · Strong engagement signal',
    signals: {voc:true, usage:true, strategy:false, market:false},
    quotes: [
      { text: '[Example] Customer needs sub-records and swim lanes — their teams use this view daily but can\'t see blocked items without dependencies.', source: '[Account], [Role]', type: 'Enterprise', channel: 'Customer call' },
    ],
    usage: [
      { label: 'Multi-day engagement', value: 'N%', detail: 'Highest across all views', pct: 91, color: 'var(--background-success-prominent)' },
    ],
    strategy: [],
    market: [],
  },
  'views-parity': {
    title: '[Example] Usability Parity',
    tag: 'tag-warning-subtle', tagText: 'Medium confidence',
    meta: 'Quarterly planning · Core usability issue',
    signals: {voc:true, usage:true, strategy:true, market:false},
    quotes: [
      { text: '[Example] Inconsistency across views causes constant friction and support tickets — users expect the same capabilities everywhere.', source: 'Internal planning', type: 'Internal', channel: 'Internal' },
    ],
    usage: [],
    strategy: ['[Example] OKR: Adoption — usability blocker'],
    market: [],
  },
  'ai-signal-synthesis': {
    title: '[Example] AI Synthesis Feasibility',
    tag: 'tag-warning-subtle', tagText: 'Medium confidence',
    meta: 'Leapfrog bet · No competitor has solved this',
    signals: {voc:false, usage:false, strategy:true, market:true},
    quotes: [
      { text: '[Example] The value is in cross-signal synthesis — a weak signal across four sources becomes a strong signal when combined.', source: 'Leadership', type: 'Internal', channel: 'Strategy sync' },
    ],
    usage: [],
    strategy: ['[Example] OKR 1 — The leapfrog bet', '[Example] OKR 4 — AI-first transformation'],
    market: ['[Competitor 1]: Execution signals only — limited', '[Competitor 2]: Feedback synthesis only', 'No competitor has cross-signal AI roadmapping'],
  },
  'ai-table-setup': {
    title: '[Example] AI-Assisted Setup',
    tag: 'tag-warning-subtle', tagText: 'Medium confidence',
    meta: 'Usage anomaly detected',
    signals: {voc:false, usage:true, strategy:true, market:false},
    quotes: [
      { text: '[Example] High early deletion rate detected — AI-generated templates could solve the blank canvas problem and improve activation.', source: 'Analytics + Design Sprint', type: 'Internal', channel: 'Internal analysis' },
    ],
    usage: [
      { label: 'Early deletion rate', value: 'High', detail: 'Critical first-experience failure', pct: 53, color: 'var(--background-danger-prominent)' },
      { label: 'Week 1 return rate', value: 'Low', detail: 'Much lower than engaged cohort', pct: 9, color: 'var(--background-danger-prominent)' },
    ],
    strategy: ['[Example] OKR: Adoption — retention issue', '[Example] OKR: AI-first'],
    market: [],
  },
};

function openBriefingTile(type) {
  const body = document.getElementById('skBody');
  let html = '';

  if (type === 'strengthened') {
    html = `
      <div class="sp-context">
        <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-200);">
          <span style="font-size:24px; font-weight:700; color:var(--text-success);">2</span>
          <span class="tag tag-success-subtle">Strengthened</span>
        </div>
        <div class="sp-context-title">Signals that got stronger since last briefing</div>
        <div class="sp-context-meta">Based on new data from the past 7 days</div>
      </div>
      <div class="sp-ai-msg">
        <div class="sp-ai-avatar">✦</div>
        <div class="sp-ai-text">Two items gained new supporting evidence this week. Here's what changed.</div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('jira-custom-fields')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-success-subtle); color:var(--text-success);">↑</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Feature Request A</div>
            <div class="sp-rec-tag"><span class="tag tag-success-subtle">+N new mentions this week</span></div>
            <div class="sp-rec-reason">[Example] Multiple enterprise accounts raised this in customer calls. Mentions and ARR impact both grew.</div>
          </div>
        </div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('performance-at-scale')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-success-subtle); color:var(--text-success);">↑</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Performance Issue</div>
            <div class="sp-rec-tag"><span class="tag tag-success-subtle">Usage data confirmed</span></div>
            <div class="sp-rec-reason">[Example] New analytics data confirms performance issues at scale. Previously anecdotal — now confirmed with metrics.</div>
          </div>
        </div>
      </div>`;
  }

  if (type === 'new') {
    html = `
      <div class="sp-context">
        <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-200);">
          <span style="font-size:24px; font-weight:700; color:var(--text-brand);">1</span>
          <span class="tag tag-primary-subtle">New signal</span>
        </div>
        <div class="sp-context-title">Signals that appeared since last briefing</div>
        <div class="sp-context-meta">Detected from Gong calls in the past 5 days</div>
      </div>
      <div class="sp-ai-msg">
        <div class="sp-ai-avatar">✦</div>
        <div class="sp-ai-text">One new signal emerged that <strong>wasn't in your top 20</strong>. It may deserve attention — or it may be noise. Click to investigate.</div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('portfolio-view')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-brand-subtle); color:var(--text-brand);">+</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Emerging Topic</div>
            <div class="sp-rec-tag"><span class="tag tag-primary-subtle">N enterprise accounts</span></div>
            <div class="sp-rec-reason">[Example] Multiple enterprise accounts mentioned a new topic in separate customer calls within the past week. Only VoC signal — no usage or strategy data yet.</div>
          </div>
        </div>
      </div>
      <div class="callout callout-info" style="font-size:12px;">
        <div class="callout-icon">💡</div>
        <div>New signals start with low confidence. Investigate to connect more data sources and build evidence.</div>
      </div>`;
  }

  if (type === 'weakened') {
    html = `
      <div class="sp-context">
        <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-200);">
          <span style="font-size:24px; font-weight:700; color:var(--text-danger);">1</span>
          <span class="tag tag-danger-subtle">Weakened</span>
        </div>
        <div class="sp-context-title">Signals that lost support since last briefing</div>
        <div class="sp-context-meta">Evidence changed in the past 7 days</div>
      </div>
      <div class="sp-ai-msg">
        <div class="sp-ai-avatar">✦</div>
        <div class="sp-ai-text">One item's evidence weakened. This doesn't mean it's wrong — but the data shifted and you should be aware.</div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('silent-abandonment')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-danger-subtle); color:var(--text-danger);">↓</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Silent Abandonment</div>
            <div class="sp-rec-tag"><span class="tag tag-danger-subtle">Usage dropped further</span></div>
            <div class="sp-rec-reason">[Example] Adoption continues declining this week. Still no customer complaints. The anomaly persists but the trend is accelerating — silence is getting louder.</div>
          </div>
        </div>
      </div>
      <div class="callout callout-warning" style="font-size:12px;">
        <div class="callout-icon">⚠️</div>
        <div>Consider running a targeted user interview to understand why users are leaving silently.</div>
      </div>`;
  }

  if (type === 'unchanged') {
    html = `
      <div class="sp-context">
        <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-200);">
          <span style="font-size:24px; font-weight:700; color:var(--text-tertiary);">3</span>
          <span class="tag tag-neutral">Unchanged</span>
        </div>
        <div class="sp-context-title">Signals with no material change</div>
        <div class="sp-context-meta">Stable over the past 7 days</div>
      </div>
      <div class="sp-ai-msg">
        <div class="sp-ai-avatar">✦</div>
        <div class="sp-ai-text">Three items had no significant evidence changes. Stable signals need less attention — but I'm monitoring them.</div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('convert-rows-jira')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-tertiary); color:var(--text-tertiary);">—</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Integration Feature</div>
            <div class="sp-rec-reason">[Example] Strong evidence, no change. Confirmed build — on track.</div>
          </div>
        </div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('enriched-backlog')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-tertiary); color:var(--text-tertiary);">—</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Evidence-Enriched Feature</div>
            <div class="sp-rec-reason">[Example] Steady interest from competitor migration prospects. No new data points.</div>
          </div>
        </div>
      </div>
      <div class="sp-rec-card" onclick="event.stopPropagation(); openPanel('kanban-deps')">
        <div class="sp-rec-header">
          <div class="sp-rec-num" style="background:var(--background-tertiary); color:var(--text-tertiary);">—</div>
          <div class="sp-rec-content">
            <div class="sp-rec-title">[Example] Dependency Feature</div>
            <div class="sp-rec-reason">[Example] Enterprise request still active. No new accounts or usage shifts.</div>
          </div>
        </div>
      </div>`;
  }

  body.innerHTML = html;
  document.getElementById('skOverlay').classList.add('open');
  document.getElementById('skPanel').classList.add('open');
  document.body.classList.add('panel-open');
}

function goToPlanWithSidekick() {
  const planTab = document.querySelectorAll('.nav .tab')[2];
  go('plan', planTab);
  setTimeout(function() { openPlanSidekick(); }, 350);
}

function openPanel(cardId, el) {
  const data = CARD_DATA[cardId];
  if (!data) return;
  document.querySelectorAll('.panel-active').forEach(c => c.classList.remove('panel-active'));
  if (el) el.classList.add('panel-active');

  const body = document.getElementById('skBody');
  const signalBtns = [
    data.signals.voc ? `<button class="sp-dive-btn" onclick="showSection('voc','${cardId}',this)"><div class="sp-dive-dot" style="background:var(--background-brand-prominent)"></div>Customer quotes (${data.quotes.length})</button>` : '',
    data.signals.usage || data.usage.length ? `<button class="sp-dive-btn" onclick="showSection('usage','${cardId}',this)"><div class="sp-dive-dot" style="background:var(--background-success-prominent)"></div>Usage data (${data.usage.length})</button>` : '',
    data.signals.strategy || data.strategy.length ? `<button class="sp-dive-btn" onclick="showSection('strategy','${cardId}',this)"><div class="sp-dive-dot" style="background:var(--background-danger-prominent)"></div>Strategy alignment</button>` : '',
    data.signals.market || data.market.length ? `<button class="sp-dive-btn" onclick="showSection('market','${cardId}',this)"><div class="sp-dive-dot" style="background:var(--background-warning-prominent)"></div>Competitor context</button>` : '',
  ].filter(Boolean).join('');

  body.innerHTML = `
    <div class="sp-context">
      <div class="sp-context-title"><span class="tag ${data.tag}">${data.tagText}</span></div>
      <div style="font-size:15px; font-weight:700; margin: var(--space-200) 0 var(--space-100);">${data.title}</div>
      <div class="sp-context-meta">${data.meta}</div>
    </div>
    <div class="sp-ai-msg">
      <div class="sp-ai-avatar">✦</div>
      <div class="sp-ai-text">I've loaded the evidence for <strong>${data.title}</strong>. Where would you like to dive deeper?</div>
    </div>
    <div class="sp-dive-options">${signalBtns}</div>
    <div id="spSection"></div>
  `;

  document.getElementById('skOverlay').classList.add('open');
  document.getElementById('skPanel').classList.add('open');
  document.body.classList.add('panel-open');
}

function showSection(type, cardId, btnEl) {
  const data = CARD_DATA[cardId];
  if (!data) return;

  document.querySelectorAll('.sp-dive-btn').forEach(b => b.classList.remove('active'));
  if (btnEl) btnEl.classList.add('active');

  const sec = document.getElementById('spSection');
  let html = '';

  if (type === 'voc') {
    html = `<div class="sp-section-head"><div class="sp-dive-dot" style="background:var(--background-brand-prominent)"></div> Customer Quotes — ${data.quotes.length} found</div>`;
    data.quotes.forEach((q, i) => {
      html += `
        <div class="sp-quote-card">
          <div class="sp-quote-text">"${q.text}"</div>
          <div class="sp-quote-source">
            <div class="sp-quote-attr">— ${q.source}</div>
            <div class="sp-quote-tags">
              <span class="tag tag-neutral">${q.channel}</span>
              ${q.arr ? `<span class="tag tag-success-subtle">${q.arr} ARR</span>` : ''}
              <span class="tag ${q.type === 'Enterprise' ? 'tag-danger-subtle' : 'tag-primary-subtle'}">${q.type}</span>
            </div>
          </div>
        </div>`;
    });
    html += `<button class="sp-validate-btn" onclick="this.innerHTML='✓ Marked as validated'; this.style.color='var(--text-success)'; this.style.borderColor='var(--border-success)'; this.style.background='var(--background-success-subtle)'">
      ✓ I've validated these quotes — evidence checks out
    </button>`;
  }

  if (type === 'usage') {
    html = `<div class="sp-section-head"><div class="sp-dive-dot" style="background:var(--background-success-prominent)"></div> Usage Data</div>`;
    data.usage.forEach(u => {
      html += `
        <div class="sp-usage-card">
          <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:var(--space-100);">
            <div class="sp-usage-label">${u.label}</div>
            <div class="sp-usage-stat">${u.value}</div>
          </div>
          <div class="sp-usage-bar-track"><div class="sp-usage-bar-fill" style="width:${u.pct}%; background:${u.color}"></div></div>
          <div style="font-size:11px; color:var(--text-tertiary)">${u.detail}</div>
        </div>`;
    });
    if (data.usage.length === 0) {
      html += `<div class="sp-ai-msg"><div class="sp-ai-avatar">✦</div><div class="sp-ai-text">No usage data connected for this item yet. Connect Snowflake or Amplitude to enrich.</div></div>`;
    }
  }

  if (type === 'strategy') {
    html = `<div class="sp-section-head"><div class="sp-dive-dot" style="background:var(--background-danger-prominent)"></div> Strategy Alignment</div>`;
    if (data.strategy.length) {
      data.strategy.forEach(s => {
        html += `<div style="display:flex; align-items:center; gap:var(--space-200); padding:var(--space-300); background:var(--background-secondary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200); font-size:13px;">
          <span style="color:var(--text-success); font-size:14px;">●</span> ${s}
        </div>`;
      });
    } else {
      html += `<div class="sp-ai-msg"><div class="sp-ai-avatar">✦</div><div class="sp-ai-text">This item hasn't been mapped to any OKR yet. Would you like me to suggest alignment?</div></div>`;
    }
  }

  if (type === 'market') {
    html = `<div class="sp-section-head"><div class="sp-dive-dot" style="background:var(--background-warning-prominent)"></div> Competitor Context</div>`;
    if (data.market.length) {
      data.market.forEach(m => {
        html += `<div style="padding:var(--space-300); background:var(--background-secondary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200); font-size:13px; color:var(--text-secondary);">${m}</div>`;
      });
    } else {
      html += `<div class="sp-ai-msg"><div class="sp-ai-avatar">✦</div><div class="sp-ai-text">No competitor activity detected for this area. Market signal source may need updating.</div></div>`;
    }
  }

  sec.innerHTML = html;
}

function sendMsg() {
  const input = document.getElementById('skInput');
  const msg = input.value.trim();
  if (!msg) return;
  input.value = '';

  const sec = document.getElementById('spSection');
  sec.innerHTML += `
    <div style="display:flex; gap:var(--space-300); align-items:flex-start; justify-content:flex-end; margin-top:var(--space-300);">
      <div style="font-size:13px; color:var(--text-primary); background:var(--background-brand-subtle); padding:var(--space-300) var(--space-400); border-radius:var(--radius-200) 2px var(--radius-200) var(--radius-200); max-width:80%;">${msg}</div>
    </div>
    <div class="sp-ai-msg" style="margin-top:var(--space-300);">
      <div class="sp-ai-avatar">✦</div>
      <div class="sp-ai-text">Let me look into that. Searching across connected data sources for relevant evidence…<br><br><em style="color:var(--text-tertiary)">[In the real product, this would query connected data sources and return specific quotes, metrics, or context.]</em></div>
    </div>
  `;
  sec.scrollIntoView({ behavior: 'smooth', block: 'end' });
}

function spotSignal(type, el) {
  document.querySelectorAll('.ssk-signal-card').forEach(c => c.classList.remove('active'));
  if (el) el.classList.add('active');

  const dyn = document.getElementById('sskDynamic');
  let html = '';

  if (type === 'voc') {
    html = `
      <div class="ssk-result">
        <div class="ssk-result-head"><div class="signal-dot voc" style="margin-top:0"></div> Voice of Customer — N mentions</div>
        <div class="sp-quote-card" style="margin-bottom:var(--space-200);">
          <div class="sp-quote-text">"[Example] Internal teams consistently hearing this request in demos and customer calls."</div>
          <div class="sp-quote-source"><div class="sp-quote-attr">— [Role], [Team]</div><div class="sp-quote-tags"><span class="tag tag-neutral">Customer call</span></div></div>
        </div>
        <div class="sp-quote-card" style="margin-bottom:var(--space-200);">
          <div class="sp-quote-text">"[Example] Customer expressing urgency — this is a dealbreaker and they're evaluating competitors."</div>
          <div class="sp-quote-source"><div class="sp-quote-attr">— [Account], [Role]</div><div class="sp-quote-tags"><span class="tag tag-neutral">Customer call</span><span class="tag tag-success-subtle">$N ARR</span></div></div>
        </div>
        <div class="sp-quote-card" style="margin-bottom:var(--space-200);">
          <div class="sp-quote-text">"[Example] Engineering teams cite this gap as the #1 reason they resist adopting the product for planning."</div>
          <div class="sp-quote-source"><div class="sp-quote-attr">— [Account], [Role]</div><div class="sp-quote-tags"><span class="tag tag-neutral">Customer call</span><span class="tag tag-success-subtle">$N ARR</span></div></div>
        </div>
        <div class="sp-quote-card" style="margin-bottom:var(--space-200);">
          <div class="sp-quote-text">"[Example] Customer needs specific capabilities — without them, the tool feels incomplete."</div>
          <div class="sp-quote-source"><div class="sp-quote-attr">— [Account], [Role]</div><div class="sp-quote-tags"><span class="tag tag-neutral">Customer call</span><span class="tag tag-success-subtle">$N ARR</span></div></div>
        </div>
        <div style="margin-top:var(--space-300); font-size:12px; color:var(--text-tertiary);">Showing 4 of N mentions · <span style="color:var(--text-brand); cursor:pointer;">Load more</span></div>
      </div>`;
  }
  if (type === 'usage') {
    html = `
      <div class="ssk-result">
        <div class="ssk-result-head"><div class="signal-dot usage" style="margin-top:0"></div> Usage Data Deep Dive</div>
        <div class="sp-usage-card" style="margin-bottom:var(--space-200);">
          <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:var(--space-100);">
            <div class="sp-usage-label">[Example] Connected user engagement multiplier</div>
            <div class="sp-usage-stat">Nx</div>
          </div>
          <div class="sp-usage-bar-track"><div class="sp-usage-bar-fill" style="width:80%; background:var(--background-success-prominent)"></div></div>
          <div style="font-size:11px; color:var(--text-tertiary)">Higher active days/month vs baseline</div>
        </div>
        <div class="sp-usage-card" style="margin-bottom:var(--space-200);">
          <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:var(--space-100);">
            <div class="sp-usage-label">[Example] Connected user retention rate</div>
            <div class="sp-usage-stat">N%</div>
          </div>
          <div class="sp-usage-bar-track"><div class="sp-usage-bar-fill" style="width:52%; background:var(--background-success-prominent)"></div></div>
          <div style="font-size:11px; color:var(--text-tertiary)">vs lower for non-connected users</div>
        </div>
        <div class="sp-usage-card" style="margin-bottom:var(--space-200);">
          <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:var(--space-100);">
            <div class="sp-usage-label">[Example] Feature requests QoQ growth</div>
            <div class="sp-usage-stat" style="color:var(--text-danger)">↑</div>
          </div>
          <div class="sp-usage-bar-track"><div class="sp-usage-bar-fill" style="width:65%; background:var(--background-danger-prominent)"></div></div>
          <div style="font-size:11px; color:var(--text-tertiary)">Accelerating demand — strongest growth signal in backlog</div>
        </div>
        <div class="sp-usage-card">
          <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:var(--space-100);">
            <div class="sp-usage-label">[Example] Users who tried feature → requested enhancement</div>
            <div class="sp-usage-stat">N%</div>
          </div>
          <div class="sp-usage-bar-track"><div class="sp-usage-bar-fill" style="width:38%; background:var(--background-warning-prominent)"></div></div>
          <div style="font-size:11px; color:var(--text-tertiary)">High conversion signal — users know what they want</div>
        </div>
      </div>`;
  }
  if (type === 'strategy') {
    html = `
      <div class="ssk-result">
        <div class="ssk-result-head"><div class="signal-dot strategy" style="margin-top:0"></div> Strategy Alignment Detail</div>
        <div style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200);">
          <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-150);"><span style="color:var(--text-success); font-size:14px;">●</span> <strong style="font-size:13px;">[Example] OKR 1 — Key business target</strong></div>
          <div style="font-size:12px; color:var(--text-secondary); line-height:1.5;">[Example] Direct enabler. This is the #1 feature request from target teams. Referenced in active opportunity records.</div>
        </div>
        <div style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200);">
          <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-150);"><span style="color:var(--text-success); font-size:14px;">●</span> <strong style="font-size:13px;">[Example] OKR 2 — Adoption target</strong></div>
          <div style="font-size:12px; color:var(--text-secondary); line-height:1.5;">[Example] Connected users retain at higher rates. This feature would deepen adoption and directly lift engagement metrics.</div>
        </div>
        <div style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary); opacity:0.6;">
          <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-150);"><span style="color:var(--text-tertiary); font-size:14px;">○</span> <span style="font-size:13px; color:var(--text-tertiary);">[Example] OKR 3 — indirect only</span></div>
          <div style="font-size:12px; color:var(--text-tertiary); line-height:1.5;">May support cross-team visibility but not a primary driver.</div>
        </div>
      </div>`;
  }
  if (type === 'market') {
    html = `
      <div class="ssk-result">
        <div class="ssk-result-head"><div class="signal-dot market" style="margin-top:0"></div> Competitive Landscape</div>
        <div class="comp-row" style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200);">
          <div class="comp-logo">C1</div>
          <div style="flex:1">
            <div class="comp-name">[Competitor 1]</div>
            <div style="font-size:11px; color:var(--text-tertiary)">Shipped this feature — GA</div>
            <div style="font-size:12px; color:var(--text-secondary); line-height:1.5; margin-top:var(--space-100);">[Example] Full feature support. Actively marketing to our target segment.</div>
          </div>
          <span class="tag tag-danger-subtle">GA</span>
        </div>
        <div class="comp-row" style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary); margin-bottom:var(--space-200);">
          <div class="comp-logo">C2</div>
          <div style="flex:1">
            <div class="comp-name">[Competitor 2]</div>
            <div style="font-size:11px; color:var(--text-tertiary)">Similar feature — Beta</div>
            <div style="font-size:12px; color:var(--text-secondary); line-height:1.5; margin-top:var(--space-100);">[Example] Integration with sync capability. Expected GA next quarter.</div>
          </div>
          <span class="tag tag-warning-subtle">Beta</span>
        </div>
        <div class="comp-row" style="padding:var(--space-300); background:var(--background-primary); border-radius:var(--radius-200); border:1px solid var(--border-primary);">
          <div class="comp-logo">C3</div>
          <div style="flex:1">
            <div class="comp-name">[Competitor 3]</div>
            <div style="font-size:11px; color:var(--text-tertiary)">No equivalent feature</div>
            <div style="font-size:12px; color:var(--text-secondary); line-height:1.5; margin-top:var(--space-100);">[Example] Different market segment — not pursuing this capability.</div>
          </div>
          <span class="tag tag-neutral">N/A</span>
        </div>
        <div class="callout callout-warning" style="margin-top:var(--space-300); padding:var(--space-300) var(--space-400); font-size:12px;">
          <div class="callout-icon">⚠️</div>
          <div><strong>Window estimate: closing.</strong> [Example] After competitors ship GA, we will be last without this capability.</div>
        </div>
      </div>`;
  }

  dyn.innerHTML = html;
  dyn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function spotQuick(question, el) {
  if (el) el.classList.add('used');
  const dyn = document.getElementById('sskDynamic');
  dyn.innerHTML += `
    <div style="display:flex; justify-content:flex-end; margin-top:var(--space-300);">
      <div style="font-size:13px; color:var(--text-primary); background:var(--background-brand-subtle); padding:var(--space-300) var(--space-400); border-radius:var(--radius-200) 2px var(--radius-200) var(--radius-200); max-width:85%;">${question}</div>
    </div>
    <div class="sp-ai-msg" style="margin-top:var(--space-200);">
      <div class="sp-ai-avatar">✦</div>
      <div class="sp-ai-text">Searching across connected data sources for <strong>"${question.toLowerCase()}"</strong>…<br><br><em style="color:var(--text-tertiary);">[In the live product, results would appear here from connected data sources.]</em></div>
    </div>
  `;
  dyn.scrollIntoView({ behavior: 'smooth', block: 'end' });
}

function sendSpotMsg() {
  const input = document.getElementById('sskInput');
  const msg = input.value.trim();
  if (!msg) return;
  input.value = '';
  spotQuick(msg, null);
}

function openPlanSidekick() {
  const body = document.getElementById('skBody');
  body.innerHTML = `
    <div class="sp-context">
      <div style="display:flex; align-items:center; gap:var(--space-200); margin-bottom:var(--space-200);">
        <span style="font-size:28px; font-weight:700; color:var(--text-brand);">72%</span>
        <span class="tag tag-warning-subtle">Room to improve</span>
      </div>
      <div class="sp-context-title">Plan Confidence Analysis</div>
      <div class="sp-context-meta">N initiatives · N strong · N validating · N weak</div>
    </div>
    <div class="sp-ai-msg">
      <div class="sp-ai-avatar">✦</div>
      <div class="sp-ai-text">I've analysed your plan and found <strong>3 actions</strong> that could raise confidence. Here are my recommendations, ranked by impact.</div>
    </div>

    <div class="sp-section-head" style="margin-top:var(--space-200);">High impact</div>
    <div class="sp-rec-card" onclick="this.querySelector('.sp-rec-detail').classList.toggle('visible')">
      <div class="sp-rec-header">
        <div class="sp-rec-num">1</div>
        <div class="sp-rec-content">
          <div class="sp-rec-title">[Example] Run a feasibility spike for Initiative 3</div>
          <div class="sp-rec-tag"><span class="tag tag-danger-subtle">High confidence impact</span></div>
          <div class="sp-rec-reason">[Example] Blocking scope decisions. A short spike would move it from "validating" to "strong" or allow early descoping.</div>
        </div>
      </div>
      <div class="sp-rec-detail">
        <div style="font-size:11px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:var(--space-200);">Why this matters</div>
        <div class="sp-quote-card" style="margin-bottom:var(--space-200);">
          <div class="sp-quote-text">"[Example] The value is in cross-signal synthesis — a weak signal across four sources becomes a strong signal when combined."</div>
          <div class="sp-quote-source"><div class="sp-quote-attr">— [Leadership source]</div></div>
        </div>
        <div style="font-size:12px; color:var(--text-secondary); line-height:1.5; margin-bottom:var(--space-300);">This initiative has <strong>no VoC evidence</strong> and <strong>no usage data</strong> — it's strategy + market only. A spike would validate the approach or reveal it needs rescoping.</div>
        <div style="display:flex; flex-wrap:wrap; gap:var(--space-200);">
          <button class="btn btn-sm btn-primary" onclick="event.stopPropagation()">Create spike ticket</button>
          <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation()">Add to Q1 sprint</button>
        </div>
      </div>
    </div>

    <div class="sp-rec-card" onclick="this.querySelector('.sp-rec-detail').classList.toggle('visible')">
      <div class="sp-rec-header">
        <div class="sp-rec-num">2</div>
        <div class="sp-rec-content">
          <div class="sp-rec-title">[Example] Gather usage data for Initiative 4</div>
          <div class="sp-rec-tag"><span class="tag tag-warning-subtle">Medium confidence impact</span></div>
          <div class="sp-rec-reason">[Example] Moderate evidence but no baseline usage metrics. Instrumentation would strengthen the case.</div>
        </div>
      </div>
      <div class="sp-rec-detail">
        <div style="font-size:11px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:var(--space-200);">Missing signals</div>
        <div style="display:flex; flex-wrap:wrap; gap:var(--space-200); margin-bottom:var(--space-300);">
          <div style="flex:1; min-width:140px; padding:var(--space-300) var(--space-300) var(--space-400); background:var(--background-danger-subtle); border-radius:var(--radius-200); font-size:12px; text-align:center;">
            <div style="font-weight:600; color:var(--text-danger);">No usage data</div>
            <div style="color:var(--text-secondary); margin-top:2px;">How many users are active?</div>
          </div>
          <div style="flex:1; min-width:140px; padding:var(--space-300) var(--space-300) var(--space-400); background:var(--background-warning-subtle); border-radius:var(--radius-200); font-size:12px; text-align:center;">
            <div style="font-weight:600; color:var(--text-warning);">No market data</div>
            <div style="color:var(--text-secondary); margin-top:2px;">How do competitors compare?</div>
          </div>
        </div>
        <div style="display:flex; flex-wrap:wrap; gap:var(--space-200);">
          <button class="btn btn-sm btn-primary" onclick="event.stopPropagation()">Request instrumentation</button>
          <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation()">Add competitor review</button>
        </div>
      </div>
    </div>

    <div class="sp-section-head">Medium impact</div>
    <div class="sp-rec-card" onclick="this.querySelector('.sp-rec-detail').classList.toggle('visible')">
      <div class="sp-rec-header">
        <div class="sp-rec-num">3</div>
        <div class="sp-rec-content">
          <div class="sp-rec-title">[Example] Validate Initiative 7 with customer interviews</div>
          <div class="sp-rec-tag"><span class="tag tag-primary-subtle">Lower confidence impact</span></div>
          <div class="sp-rec-reason">[Example] Internal usage data + strategy alignment, but limited direct quotes. Targeted interviews would confirm scope.</div>
        </div>
      </div>
      <div class="sp-rec-detail">
        <div style="font-size:11px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:var(--space-200);">Suggested interviewees</div>
        <div style="font-size:12px; color:var(--text-secondary); line-height:1.6; margin-bottom:var(--space-300);">
          [Example] Based on usage patterns, highest-engagement users:<br>
          <strong>1.</strong> [Account A] ([Role] — N active boards)<br>
          <strong>2.</strong> [Account B] ([Role] — N active boards)<br>
          <strong>3.</strong> [Account C] ([Role] — N active boards)
        </div>
        <div style="display:flex; flex-wrap:wrap; gap:var(--space-200);">
          <button class="btn btn-sm btn-primary" onclick="event.stopPropagation()">Draft interview request</button>
          <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation()">View their usage</button>
        </div>
      </div>
    </div>

    <div style="margin-top:var(--space-400); padding:var(--space-400); background:var(--background-secondary); border-radius:var(--radius-200); border:1px solid var(--border-primary);">
      <div style="font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:0.5px; color:var(--text-tertiary); margin-bottom:var(--space-300);">Projected outcome</div>
      <div style="display:flex; align-items:center; gap:var(--space-300); margin-bottom:var(--space-300);">
        <div style="text-align:center; flex-shrink:0;">
          <div style="font-size:10px; color:var(--text-tertiary);">Now</div>
          <div style="font-size:20px; font-weight:700; color:var(--text-secondary);">72%</div>
        </div>
        <div style="font-size:16px; color:var(--text-brand); flex-shrink:0;">→</div>
        <div style="text-align:center; flex-shrink:0;">
          <div style="font-size:10px; color:var(--text-tertiary);">After</div>
          <div style="font-size:20px; font-weight:700; color:var(--text-success);">~88%</div>
        </div>
      </div>
      <div style="height:8px; background:var(--background-tertiary); border-radius:var(--radius-full); overflow:hidden; margin-bottom:var(--space-200);">
        <div style="height:100%; width:88%; background:var(--background-success-prominent); border-radius:var(--radius-full); opacity:0.3;"></div>
      </div>
      <div style="height:8px; background:transparent; border-radius:var(--radius-full); overflow:hidden; margin-top:-8px; margin-bottom:var(--space-200);">
        <div style="height:100%; width:72%; background:var(--background-brand-prominent); border-radius:var(--radius-full);"></div>
      </div>
      <div style="display:flex; justify-content:space-between; font-size:10px; color:var(--text-tertiary); margin-bottom:var(--space-200);">
        <span>Current</span>
        <span>+16% potential</span>
      </div>
      <div style="font-size:11px; color:var(--text-tertiary);">~3 weeks of effort across all 3 actions</div>
    </div>
  `;

  document.getElementById('skOverlay').classList.add('open');
  document.getElementById('skPanel').classList.add('open');
  document.body.classList.add('panel-open');
}

function closePanel() {
  document.getElementById('skOverlay').classList.remove('open');
  document.getElementById('skPanel').classList.remove('open');
  document.body.classList.remove('panel-open');
  document.querySelectorAll('.panel-active').forEach(c => c.classList.remove('panel-active'));
}

function go(id, el) {
  closePanel();
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav .tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  el.classList.add('active');
  window.scrollTo(0, 0);
}
</script>
</body>
</html>